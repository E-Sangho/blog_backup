---
layout: post
title: Youtube Clone
date: Sun Oct 17 17:52:23 JST 2021
categories: Clone NodeJS
tag: Clone NodeJs
toc: true
---
## 0 What is this post?
ì´ í¬ìŠ¤íŠ¸ëŠ” ë…¸ë§ˆë“œì½”ë”ë¼ëŠ” ì‚¬ì´íŠ¸ì˜ ìœ íŠœë¸Œ í´ë¡ ì½”ë”©ì„ ì •ë¦¬í•œ í¬ìŠ¤íŠ¸ë‹¤. ì²˜ìŒ ë°°ìš¸ë•ŒëŠ” ë¬´ì—‡ì„ ì‹œìž‘í•´ì•¼ í• ì§€ ëª¨ë¥´ê¸° ë•Œë¬¸ì— í´ë¡ ì½”ë”©ì€ íš¨ê³¼ì ì¸ ìˆ˜ë‹¨ì´ë¼ ìƒê°í•œë‹¤. í•˜ì§€ë§Œ ê·¸ ë‹¤ìŒìœ¼ë¡œ ìŠ¤ìŠ¤ë¡œ ë§Œë“¤ì–´ë³´ì§€ ì•Šìœ¼ë©´ ì•„ë¬´ëŸ° ì“¸ëª¨ê°€ ì—†ì„ ê²ƒì´ë‹¤. ì´ í¬ìŠ¤íŠ¸ëŠ” ì˜ìƒì—ì„œ ë°°ìš´ ë‚´ìš©ì„ ì „ì²´ì ìœ¼ë¡œ ì •ë¦¬í•˜ê³  ê¸°ë¡í•˜ë ¤ê³  í•œë‹¤. ê·¸ í›„ì—ëŠ” ë°°ìš´ ê²ƒì„ ì‘ìš©í•´ì„œ ìƒˆë¡œìš´ ê²ƒì„ ë§Œë“œëŠ” í¬ìŠ¤íŠ¸ë¥¼ ìž‘ì„±í•  ì˜ˆì •ì´ë‹¤.

ì´ ìˆ˜ì—…ì—ì„œ í•„ìš”í•œ ê²ƒì€ ê¸°ì´ˆì ì¸ HTML, CSS, JS ì§€ì‹ì´ë‹¤. ìž˜ ì•Œì§€ ëª»í•˜ë”ë¼ë„ ì–´ëŠ ì •ë„ ì´í•´ë§Œ í•˜ê³  ìžˆë‹¤ë©´ ë³„ë‹¤ë¥¸ ë¬¸ì œ ì—†ì´ ë“¤ì„ ìˆ˜ ìžˆë‹¤. ìˆ˜ì—…ì—ì„œ ë‹¤ë£¨ëŠ” ë‚´ìš©ë“¤ì€ ì•„ëž˜ì™€ ê°™ë‹¤.

- í”„ë¡ íŠ¸ì—”ë“œ: HTML5, CSS3, Pug
- ë°±ì—”ë“œ: NodeJS, MongoDB, Express

## 1 Introduction

### 1.3 What is NodeJS
>NodeJS is a JavaScript runtime built on Chrome's V8 JavaScript engine.
NodeJSëŠ” ê°„ë‹¨ížˆ ë§í•˜ìžë©´, ë¸Œë¼ìš°ì € ë°–ì—ì„œë„ JavaScriptë¥¼ ì‚¬ìš©í•  ìˆ˜ ìžˆê²Œ í•´ì¤€ë‹¤. ê¸°ì¡´ì˜ JavaScriptëŠ” ë¸Œë¼ìš°ì € ìƒì—ì„œë§Œ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì—, ë¸Œë¼ìš°ì € ì™¸ì—ì„  ì‚¬ìš©í•  ìˆ˜ ì—†ì—ˆë‹¤. ì´ë•Œ, ë¸Œë¼ìš°ì € ìƒì—ì„œ V8 ì—”ì§„ì„ ì‚¬ìš©í•˜ëŠ”ë°, ìžë°”ìŠ¤í¬ë¦½íŠ¸ ì–¸ì–´ë¥¼ ê¸°ê³„ ì½”ë“œë¡œ ë°”ê¿”ì£¼ëŠ” ì—­í• ì„ í•œë‹¤. NodeJSëŠ” ì´ë¥¼ ê°€ì ¸ì™€ì„œ ë¸Œë¼ìš°ì € ì™¸ì˜ ê³µê°„ì—ì„œë„ ìžë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìžˆê²Œ ë§Œë“¤ì—ˆë‹¤.

>NodeJS uses an event-driven, non-blocking I/O model that makes it lightweight and efficient.
I/OëŠ” input/outputì„ ë§í•˜ëŠ”ë°, ìž…ë ¥ê³¼ ì¶œë ¥ì— ì‹œê°„ì´ ê±¸ë¦¬ê¸° ë•Œë¬¸ì— ë‹¤ë¥¸ ìž‘ì—…ì„ ë§‰ì„ ìˆ˜ ìžˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ì„œ ë‘ ì‚¬ìš©ìžì—ê²Œ ì •ë³´ë¥¼ ë°›ì•„ì™€ì„œ ì¶œë ¥í•˜ëŠ” ê²½ìš°ë¥¼ ìƒê°í•´ë³´ìž. Blocking I/OëŠ” ì•žì„  ì‚¬ëžŒì˜ ì •ë³´ê°€ ì¶œë ¥ë˜ê¸° ì „ì—ëŠ” ë‘ë²ˆì§¸ ì‚¬ëžŒì˜ ìš”ì²­ì´ ì‹œìž‘ë˜ì§€ ì•ŠëŠ”ë‹¤. ê·¸ëž˜ì„œ ì²«ë²ˆì§¸ ì‚¬ëžŒì˜ ì •ë³´ ì²˜ë¦¬ê°€ ë‹¤ ëë‚˜ê¸° ì „ì—ëŠ” ë‘ë²ˆì§¸ ìž‘ì—…ì„ ì‹œìž‘í•˜ì§€ ì•Šê³  ì‹œê°„ì˜ ë‚­ë¹„ê°€ ìƒê¸´ë‹¤. ì´ë¥¼ ìƒˆë¡œìš´ ìŠ¤ë ˆë“œì— í• ë‹¹í•´ì„œ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ë„ ìƒê°í•  ìˆ˜ ìžˆì„ ê²ƒì´ë‹¤. ê·¸ë ‡ì§€ë§Œ ìžë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ì‹±ê¸€ ìŠ¤ë ˆë“œ í˜•íƒœë¡œ ì‹¤í–‰ë˜ë¯€ë¡œ(ì‹¤ì œë¡œ ì‹±ê¸€ ìŠ¤ë ˆë“œëŠ” ì•„ë‹ˆì§€ë§Œ ì´ë²¤íŠ¸ ì²˜ë¦¬ë²•ì´ ì‹±ê¸€ì´ë‹¤) ë©€í‹° ìŠ¤ë ˆë“œë¡œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì€ ì–´ë µë‹¤. ë°˜ë©´ì— Non-blocking I/O ëª¨ë¸ì€ ì´ì „ ì‚¬ìš©ìžì˜ ì •ë³´ë¥¼ ìš”ì²­í•˜ê³  ê¸°ë‹¤ë¦¬ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ë‹¤ìŒ ì‚¬ìš©ìžì˜ ì •ë³´ë„ ìš”ì²­í•œë‹¤. NodeJS ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ APIëŠ” ëª¨ë‘ ë¹„ë™ê¸°ì‹(non-blocking)ì´ë‹¤. ë‹¤ì‹œ ë§í•´, NodeJS ê¸°ë°˜ ì„œë²„ëŠ” APIê°€ ì‹¤í–‰ëì„ ë•Œ, ë°ì´í„°ë¥¼ ë°˜í™˜ì„ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  ë‹¤ìŒ APIë¥¼ ì‹¤í–‰í•œë‹¤.

NodeJSì˜ í•µì‹¬ì€ ë¸Œë¼ìš°ì € ì™¸ì˜ ê³µê°„ì—ì„œë„ ì‚¬ìš©ê°€ëŠ¥í•´ì¡Œê³ , ì´ë¥¼ ì„œë²„ë¥¼ ë§Œë“¤ ë•Œ ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤ëŠ” ê²ƒì´ë‹¤. ì´ì „ì—ëŠ” í”„ë¡ íŠ¸ì—”ë“œëŠ” ìžë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ë§Œë“¤ê³  ë°±ì—”ë“œëŠ” Java, Ruby ë“±ìœ¼ë¡œ ë§Œë“¤ì–´ì•¼ í–ˆëŠ”ë°, í•œê°€ì§€ ì–¸ì–´ë¡œ ì›¹ì„ ë‹¤ë£° ìˆ˜ ìžˆê²Œ ëœ ê²ƒì´ë‹¤.

### What is NPM
npm(Node Package Manager)ì€ NodeJSì˜ íŒ¨í‚¤ì§€ë¥¼ ê´€ë¦¬í•˜ëŠ” ë„êµ¬ë‹¤. NodeJSë§Œ ìžˆìœ¼ë©´ ë³„ë‹¤ë¥¸ ì„¤ì¹˜ ì—†ì´ ì‚¬ìš©í•  ìˆ˜ ìžˆìœ¼ë©°, npmìœ¼ë¡œ í•„ìš”í•œ íŒ¨í‚¤ì§€ë¥¼ ì‰½ê²Œ ì°¾ê³  ì„¤ì¹˜í•  ìˆ˜ ìžˆë‹¤. npmì˜ ëŒ€ìš©ìœ¼ë¡œ íŽ˜ì´ìŠ¤ë¶ì˜ yarnì´ ìžˆë‹¤. ë³¸ëž˜ëŠ” ì„±ëŠ¥ì°¨ê°€ ë‚¬ì—ˆì§€ë§Œ ìµœê·¼ì—ëŠ” npmë„ ë°œì „í•´ì„œ ë¹„ìŠ·í•œ ì„±ëŠ¥ì´ë¼ ì›í•˜ëŠ”ëŒ€ë¡œ ê³ ë¥´ë©´ ëœë‹¤.

## 2 SET UP

### 2.0 Your First NodeJS Project
í´ë”ë¥¼ í•˜ë‚˜ ë§Œë“  ë‹¤ìŒ `git init`ì„ ì‹¤í–‰í•´ì¤€ë‹¤. ê·¸ í›„ ê¹ƒí—ˆë¸Œì— ë ˆíŒŒì§€í† ë¦¬ë¥¼ ë§Œë“¤ì–´ì„œ ë°±ì—…í•  ì¤€ë¹„ë¥¼ í•´ì¤€ë‹¤.

`npm init`ì€ NodeJSë¥¼ ì‹œìž‘í•˜ê¸° ìœ„í•œ ëª…ë ¹ì–´ë¡œ **package.json** íŒŒì¼ì„ ë§Œë“¤ì–´ ì¤€ë‹¤. ìž…ë ¥í•´ì£¼ë©´ íŒ¨í‚¤ì§€ ì´ë¦„, ë²„ì „, ì„¤ëª…ì„ ì“°ëŠ” ê³³ì´ ë‚˜ì˜¤ëŠ”ë° ë‚˜ì¤‘ì— ìˆ˜ì • ê°€ëŠ¥í•˜ë¯€ë¡œ ì›í•˜ëŠ”ëŒ€ë¡œ ì ì–´ì£¼ë©´ ëœë‹¤. ê·¸ í›„ ë‚˜ì˜¤ëŠ” entry point, test command, keyword ë“±ì€ ìš°ì„ ì€ ì—”í„°ë¡œ ë„˜ì–´ê°€ì¤€ë‹¤. ê·¸ëŸ¬ë©´ package.json íŒŒì¼ì— ì§€ê¸ˆê¹Œì§€ ìž…ë ¥í•œ ë‚´ìš©ì´ json íŒŒì¼ë¡œ ì €ìž¥ëœ ê²ƒì„ ì•Œ ìˆ˜ ìžˆë‹¤. ì´í›„ì— ë°”ê¾¸ê³  ì‹¶ì€ ë‚´ìš©ì´ ìžˆë‹¤ë©´ ì´ íŒŒì¼ì„ ìˆ˜ì •í•´ì£¼ë©´ ëœë‹¤.

package.json íŒŒì¼ì„ ë³´ë©´ mainì— **index.js**ë¼ê³  ì í˜€ ìžˆëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìžˆë‹¤. index.js íŒŒì¼ì´ ì—†ê¸° ë•Œë¬¸ì— í•˜ë‚˜ ë§Œë“¤ì–´ ì¤€ë‹¤. ë‚´ìš©ì€ ì•„ë¬´ê±°ë‚˜ ìƒê´€ ì—†ì§€ë§Œ ê¸°ë³¸ì ì¸ ë‚´ìš©ì¸ `console.log("Hello World!");`ë¥¼ ìž…ë ¥í•´ì¤€ë‹¤.

### 2.1 Installing Express

#### scripts
ì´ë²ˆì—ëŠ” index.js íŒŒì¼ì„ ì‹¤í–‰í•˜ëŠ” ë°©ë²•ì„ ë°°ì›Œë³´ê² ë‹¤. ì²«ë²ˆì§¸ ë°©ë²•ì€ `node index.js`ë¥¼ ìž…ë ¥í•˜ëŠ” ê²ƒì´ë‹¤. ì´ëŠ” ë…¸ë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ì§€ë§Œ ì•žìœ¼ë¡œëŠ” ë…¸ë“œë¡œ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ì§€ ì•Šì„ ê²ƒì´ë‹¤. ëŒ€ì‹ ì— package.jsonìœ¼ë¡œ ì‹¤í–‰í•˜ê²Œ ëœë‹¤. package.jsonì„ ë³´ë©´ mainì´ ìžˆë‹¤. mainì€ ë‚´ê°€ ë§Œë“¤ê³  ë°°í¬í•œ packageë¥¼ ë‹¤ë¥¸ ì‚¬ëžŒë“¤ì´ ì„¤ì¹˜í•˜ë©´ mainì„ ì‚¬ìš©í•œë‹¤ëŠ” ì˜ë¯¸ë¡œ ì§€ê¸ˆ ìš°ë¦¬ì—ê²Œ í•„ìš”í•œ ë‚´ìš©ì€ ì•„ë‹ˆë‹ˆ ì§€ì›Œì¤€ë‹¤. ì´ë²ˆì— ë°”ê¿”ì¤„ ê²ƒì€ **scripts**ë‹¤. scriptsëŠ” ì‹¤í–‰í•˜ê³  ì‹¶ì€ ê²ƒì„ ì˜ë¯¸í•œë‹¤. ì•žì„œ `node index.js`ë¥¼ ìž…ë ¥í–ˆë˜ ê²ƒì„ packageê°€ ëŒ€ì‹  ìž…ë ¥í•˜ë„ë¡ ë§Œë“¤ ìˆ˜ ìžˆë‹¤. ìš°ì„  ì•„ëž˜ì²˜ëŸ¼ scripsë¥¼ ì¶”ê°€í•´ì£¼ìž.

```
// package.json
...
"scripts": {
    "start": "node index.js"
},
...
```

ì´ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ë°©ë²•ì€ `npm run start`ë¼ê³  ìž…ë ¥í•˜ëŠ” ê²ƒì´ë‹¤. ê·¸ëŸ¬ë©´ index.jsê°€ ì‹¤í–‰ë˜ì„œ ì½˜ì†”ì— *Hello World!*ê°€ ë‚˜ì˜¤ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìžˆë‹¤. scriptsì—ëŠ” ë‹¤ë¥¸ ì‹¤í–‰ ëª…ë ¹ì–´ë„ ë§Œë“¤ì–´ ì¤„ ìˆ˜ ìžˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ `"another": "node index.js"`ë¼ê³  ì¨ì¤¬ìœ¼ë©´ `npm run another`ë¡œ scriptsì˜ ë‹¤ë¥¸ ëª…ë ¹ì„ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìžˆë‹¤. ëŒ€ì‹  ì‹¤í–‰í•˜ë ¤ëŠ” íŒŒì¼ ìœ„ì¹˜ê°€ package.jsonê³¼ ë‹¤ë¥¸ ìœ„ì¹˜ì— ìžˆë‹¤ë©´ ì •í™•ížˆ ìœ„ì¹˜ë¥¼ ì§€ì •í•´ ì¤˜ì•¼ í•œë‹¤.

#### npm i express
`npm install`ë˜ëŠ” `npm i`ë¥¼ ì‚¬ìš©í•˜ë©´ ì›í•˜ëŠ” íŒ¨í‚¤ì§€ë¥¼ ë‹¤ìš´ë°›ì„ ìˆ˜ ìžˆë‹¤. Expressë¥¼ ì„¤ì¹˜í•˜ê¸° ìœ„í•´ `npm i express`ë¥¼ ìž…ë ¥í•´ì•¼ í•˜ëŠ”ë°, ê·¸ ì „ì— package.jsonê³¼ index.js ì°½ì„ ë°˜ë“œì‹œ ë„ê³  ì§„í–‰í•˜ìž. ì‹¤í–‰í•˜ë©´ package-lock íŒŒì¼ê³¼ node_modules í´ë”ê°€ ìƒê¸´ ê²ƒì„ ë³¼ ìˆ˜ ìžˆë‹¤. node_modulesì—ëŠ” npmìœ¼ë¡œ ì„¤ì¹˜í•œ ëª¨ë“  íŒ¨í‚¤ì§€ê°€ ì €ìž¥ëœë‹¤. node_modulesë¥¼ ì—´ì–´ë³´ë©´ express í´ë”ê°€ ìžˆë‹¤. express í´ë”ë¥¼ ì—´ì–´ë³´ë©´ package.jsonì´ ìžˆëŠ”ë°, **dependencies**ë¼ëŠ” í•­ëª©ì´ ìžˆë‹¤. ì—¬ê¸°ì—ëŠ” expressê°€ ì‹¤í–‰ë˜ê¸° ìœ„í•´ í•„ìš”í•œ íŒ¨í‚¤ì§€ì™€ ë²„ì „ì„ ì ì–´ë†“ì€ ê³³ì´ë‹¤. npmì€ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•  ë•Œ ê·¸ íŒ¨í‚¤ì§€ë§Œ ì„¤ì¹˜í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ dependencisì˜ íŒ¨í‚¤ì§€ë¥¼ ëª¨ë‘ ë‹¤ìš´ ë°›ëŠ”ë‹¤. ê·¸ë¦¬ê³  ê° íŒ¨í‚¤ì§€ë¥¼ ì‹¤í–‰í•˜ëŠ”ë° í•„ìš”í•œ íŒ¨í‚¤ì§€ê°€ ìžˆë‹¤ë©´ ë˜ dependenciesì˜ íŒ¨í‚¤ì§€ë¥¼ ë°›ì•„ì¤€ë‹¤. ì´ë ‡ê²Œ íŒ¨í‚¤ì§€ê°€ ê¼¬ë¦¬ë¥¼ ë¬¼ê³  ì´ì–´ì§€ê¸° ë•Œë¬¸ì— ì§ì ‘ ì„¤ì¹˜í•˜ë ¤ë©´ ì–´ë ¤ìš¸ ìˆ˜ ìžˆë‹¤. ê·¸ë ‡ì§€ë§Œ npmì´ ì´ ëª¨ë“  ê³¼ì •ì„ ëŒ€ì‹ í•´ì£¼ê¸° ë•Œë¬¸ì— ìš°ë¦¬ëŠ” ì›í•˜ëŠ” íŒ¨í‚¤ì§€ë§Œ ë°›ìœ¼ë©´ ì•„ë¬´ëŸ° ë¬¸ì œ ì—†ì´ ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤.

ì´ë²ˆì—ëŠ” package.json íŒŒì¼ì„ ì—´ì–´ë³´ìž. ê·¸ëŸ¬ë©´ dependenciesê°€ ìƒê¸°ê³ , expressê°€ ìžˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìžˆë‹¤. ì¦‰, npmìœ¼ë¡œ ì„¤ì¹˜í•´ì£¼ë©´ package.jsonì— ìžë™ì ìœ¼ë¡œ depemdenciesë¥¼ ë§Œë“¤ì–´ì„œ ê´€ë¦¬í•´ì£¼ë¯€ë¡œ ìš°ë¦¬ê°€ ë³„ë‹¤ë¥¸ ê´€ë¦¬ë¥¼ í•  í•„ìš”ëŠ” ì—†ë‹¤.

### 2.2 Understanding Dependencies
ìš°ì„ ì€ íŒŒì¼ì—ì„œ node_modulesì™€ package-lock.json íŒŒì¼ì„ ì§€ì›Œì£¼ìž. expressë¥¼ ì§€ì› ê¸° ë•Œë¬¸ì— ë‹¤ì‹œ ì„¤ì¹˜í•´ì¤˜ì•¼ í•œë‹¤. ê·¸ëŸ°ë° ì´ë²ˆì—ëŠ” `npm i express`ë¡œ ì‹¤í–‰í•  í•„ìš”ê°€ ì—†ë‹¤. ìš°ë¦¬ê°€ í•  ì¼ì€ `npm i`ë§Œ í•´ì£¼ë©´ ëœë‹¤. ê·¸ë ‡ê²Œ í•˜ë©´ ìžë™ì ìœ¼ë¡œ ì´ì „ì˜ íŒŒì¼ì´ ëª¨ë‘ ì„¤ì¹˜ëœë‹¤. ê·¸ ì´ìœ ëŠ” npmì´ package.json íŒŒì¼ì˜ dependenciesë¥¼ ë³´ê³  í•„ìš”í•œ íŒ¨í‚¤ì§€ê°€ ì—†ë‹¤ë©´ ìžë™ì ìœ¼ë¡œ ì„¤ì¹˜í•´ì£¼ê¸° ë•Œë¬¸ì´ë‹¤. ìš°ë¦¬ëŠ” ì´ì „ì— package.jsonì— dependenciesë¥¼ ì¶”ê°€í–ˆìœ¼ë¯€ë¡œ expressê°€ ì í˜€ìžˆê³ , npm i ë§Œìœ¼ë¡œ ëª¨ë“  í•„ìš”í•œ ê²ƒì„ ì„¤ì¹˜í•  ìˆ˜ ìžˆë‹¤.

ì´ ê¸°ëŠ¥ì´ ê°€ìž¥ ìœ ìš©í•œ ê²ƒì€ íŒŒì¼ì„ ê³µìœ í•  ë•Œë‹¤. node_moduelsëŠ” êµ‰ìž¥ížˆ ë§Žì€ íŒ¨í‚¤ì§€ê°€ ë“¤ì–´ìžˆê¸° ë•Œë¬¸ì— ìš©ëŸ‰ì´ í¬ë‹¤. ê·¸ëž˜ì„œ ì´ ëª¨ë“  ê²ƒì„ ë™ì‹œì— ì „ì†¡í•´ì£¼ëŠ” ê²ƒì€ ë¹„íš¨ìœ¨ì ì´ë‹¤. ê·¸ëŸ°ë° package.jsonë§Œ ìžˆë‹¤ë©´ ì–´ë–¤ íŒ¨í‚¤ì§€ê°€ í•„ìš”í•œì§€ ì•Œ ìˆ˜ ìžˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ node_modulesë¥¼ ì œì™¸í•˜ê³  ê³µìœ í•´ë„ npm ië¥¼ ì‚¬ìš©í•˜ë©´ ë™ì¼í•œ í™˜ê²½ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤. ì•žìœ¼ë¡œ node_modules í´ë”ë¥¼ githubì— ì €ìž¥í•  í•„ìš”ê°€ ì—†ìœ¼ë¯€ë¡œ .gitignore íŒŒì¼ë¡œ ì œì™¸í•´ì£¼ìž.
```
// .gitignore
/node_modules
```
ë‹¤ë¥¸ í™˜ê²½ì—ì„œ íŒŒì¼ì„ ë°›ê³  npmìœ¼ë¡œ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•´ì¤„ ë•Œ, ë°˜ë“œì‹œ package.json íŒŒì¼ì„ ì €ìž¥í•˜ê³  í•´ì•¼ í•œë‹¤. npm iê°€ package.json íŒŒì¼ì„ ìˆ˜ì •í•˜ê¸° ë•Œë¬¸ì— ì €ìž¥í•˜ì§€ ì•Šìœ¼ë©´ ì œëŒ€ë¡œ ìž‘ë™í•˜ì§€ ì•Šì„ ìˆ˜ ìžˆë‹¤. ë²ˆê±°ë¡­ì§€ ì•Šìœ¼ë ¤ë©´ ëª¨ë“  íŒŒì¼ì„ ì €ìž¥í•˜ê³  ëˆ í›„ì— npm ië¡œ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ë„ë¡ í•˜ìž.

### 2.3 The Tower of Babel

#### Babel
[Babel](https://babeljs.io/)ì€ ìžë°”ìŠ¤í¬ë¦½íŠ¸ ì»¨íŒŒì¼ëŸ¬ë‹¤. NodeJSëŠ” ìžë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ìž‘ë™í•œë‹¤. ê·¸ëŸ°ë° ì•„ì§ NodeJSê°€ ì´í•´í•˜ì§€ ëª»í•˜ëŠ” ìžë°”ìŠ¤í¬ë¦½íŠ¸ê°€ ìžˆë‹¤. ì„ íƒì§€ëŠ” 2ê°œë‹¤. ì²«ë²ˆì§¸ëŠ”, NodeJSì—ì„œ ìž‘ë™í•˜ëŠ” ìžë°”ìŠ¤í¬ë¦½íŠ¸ë§Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ê³ , ë‹¤ë¥¸ í•˜ë‚˜ëŠ” Babelì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤. Babelì€ NodeJSê°€ ì´í•´í•˜ì§€ ëª»í•˜ëŠ” ìµœì‹  ìžë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì´ì „ì˜ ìžë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ë°”ê¿”ì¤€ë‹¤. ê·¸ëž˜ì„œ NodeJSê°€ ìžë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì´í•´í•  ìˆ˜ ìžˆëŠ”ì§€ í™•ì¸í•˜ì§€ ì•Šì•„ë„, ì•Œì•„ì„œ ì½”ë“œë¥¼ ì´í•´í•˜ë„ë¡ ë°”ê¿”ì£¼ê¸° ë•Œë¬¸ì— ì½”ë“œë¥¼ ì‰½ê²Œ ë§Œë“¤ ìˆ˜ ìžˆë‹¤.

#### devDependencies
[ë°”ë²¨ ì›¹íŽ˜ì´ì§€](https://babeljs.io/setup#installation)ì˜ ì„¤ëª…ì„ ë”°ë¼ê°€ë©° ì§„í–‰í•˜ê² ë‹¤.
ìš°ì„ ì€ NodeJSìš© Babelì„ ì„¤ì¹˜í•´ì¤€ë‹¤. `npm i --save-dev @babel/core`ë¥¼ ìž…ë ¥í•œë‹¤. ê·¸í›„ package.jsonì„ ì—´ì–´ë³´ë©´ **devDependencies**ê°€ ìƒê¸´ ê²ƒì„ ì•Œ ìˆ˜ ìžˆë‹¤. ê·¸ëŸ°ë° devDependenciesë¥¼ ê·¸ëƒ¥ dependenciesë¡œ ì˜®ê²¨ë„ ë™ì¼í•˜ê²Œ íŒŒì¼ì´ ì„¤ì¹˜ëœë‹¤. ê·¸ë ‡ë‹¤ë©´ ë‘˜ì˜ ì°¨ì´ì ì€ ë¬´ì—‡ì¼ê¹Œ? devDependenciesëŠ” developer Dependenciesë‹¤. ì¦‰, ê°œë°œìžë¥¼ ìœ„í•œ dependenciesë‹¤. dependenciesëŠ” ì½”ë“œê°€ ì‹¤í–‰ë˜ê¸° ìœ„í•´ í•„ìš”í•œ í•„ìˆ˜ì ì¸ íŒ¨í‚¤ì§€ë‹¤. ë‹¤ì‹œë§í•´ í”„ë¡œì íŠ¸ì—ê²Œ í•„ìš”í•œ íŒ¨í‚¤ì§€ë‹¤. ë°˜ë©´ devDependenciesëŠ” ê°œë°œìžê°€ ì½”ë“œë¥¼ ë§Œë“¤ë•Œ í•„ìš”í•œ íŒ¨í‚¤ì§€ë¡œ ê°œë°œìžì˜ íŽ¸ì˜ë¥¼ ìœ„í•´ ë§Œë“¤ì–´ì§„ íŒ¨í‚¤ì§€ë‹¤. ê·¸ëž˜ì„œ devDependenciesì— ìžˆëŠ” ê²ƒë“¤ì€ í”„ë¡œì íŠ¸ì— ì–´ë–¤ ê¸°ëŠ¥ì„ ì£¼ê±°ë‚˜ í•˜ì§€ ì•Šê³  ì½”ë“œ ìž‘ì„±ì„ ìš©ì´í•˜ê²Œë§Œ í•˜ëŠ” íŒ¨í‚¤ì§€ë‹¤. ê·¸ëž˜ì„œ Babelì€ devDependenciesì— ìžˆë‹¤.

ê·¸ë ‡ë‹¤ë©´ ì–´ë–»ê²Œ devDependenciesì— ì €ìž¥í•  ìˆ˜ ìžˆì„ê¹Œ? ë‹¤ì‹œ ì„¤ì¹˜ ë°©ë²•ìœ¼ë¡œ ëŒì•„ê°€ë³´ë©´ --save-devë¼ê³  ì“´ ê²ƒì„ ì•Œ ìˆ˜ ìžˆë‹¤. ì´ ë¶€ë¶„ì´ ì—†ìœ¼ë©´ ëª¨ë“  ëª¨ë“ˆì´ dependenciesì— ë§Œë“¤ì–´ì§„ë‹¤. ê·¸ëŸ¬ë¯€ë¡œ devDependenciesì— ì„¤ì¹˜í•´ì•¼ í•˜ëŠ” ê²ƒì€ --save-devë¥¼ ë¶™ì—¬ì„œ ì„¤ì¹˜í•´ì¤€ë‹¤.

#### Babel Presets
ì´ë²ˆì—ëŠ” babel.config.json íŒŒì¼ì„ ë§Œë“¤ì–´ì£¼ìž. ê·¸ë¦¬ê³  ë‹¤ìŒ ì½”ë“œë¥¼ ì ì–´ì¤€ë‹¤.
```
// babel.config.json
{
  "presets": ["@babel/preset-env"]
}
```
ê·¸ë¦¬ê³  `npm install @babel/preset-env --save-dev`ë¥¼ ì‹¤í–‰í•œë‹¤. ì´ëŠ” ë°”ë²¨ì˜ presetsë¥¼ ì§€ì •í•˜ëŠ” ê³¼ì •ì´ë‹¤. ìš°ë¦¬ëŠ” ìµœì‹  ìžë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë²ˆì—­í•˜ëŠ”ë° ì‚¬ìš©í•˜ì§€ë§Œ, Reactë‚˜ TypeScriptë¥¼ ë²ˆì—­í•˜ëŠ”ë°ë„ ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤. ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ë²ˆì—­í• ì§€ json íŒŒì¼ì˜ presetsë¡œ ì§€ì •í•  ìˆ˜ ìžˆë‹¤. [í”„ë¦¬ì…‹](https://babeljs.io/docs/en/presets/)ì—ì„œ ì–´ë–¤ í”„ë¦¬ì…‹ì´ ìžˆëŠ”ì§€ ë³¼ ìˆ˜ ìžˆì§€ë§Œ, ìš°ë¦¬ëŠ” ìžë°”ìŠ¤í¬ë¦½íŠ¸ ë²ˆì—­ì—ë§Œ ì“¸ ê²ƒì´ë¯€ë¡œ ê¹Šê²Œ ì•Œ í•„ìš”ëŠ” ì—†ë‹¤.

### 2.4 Nodemon
ë°”ë²¨ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì€ ì•„ëž˜ ì½”ë“œì˜ code ë¶€ë¶„ì— ë°”ê¾¸ê³  ì‹¶ì€ ì½”ë“œë¥¼ ë„£ì–´ì£¼ë©´ ëœë‹¤.
```
require("@babel/core").transform("code", {
  presets: ["@babel/preset-env"],
});
```
ê·¸ë ‡ì§€ë§Œ ì´ë¥¼ ì§ì ‘ í•˜ê³  ì‹¶ì§€ëŠ” ì•Šë‹¤. ìžë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ì§ì ‘ í•´ì£¼ëŠ” ëŒ€ì‹ ì— package.jsonì—ì„œ ë°”ë²¨ë¡œ ì»´íŒŒì¼í•˜ëŠ” scritsë¥¼ ë§Œë“¤ê² ë‹¤. ì´ë¥¼ ìœ„í•´ Nodemonì„ ì‚¬ìš©í•  ê²ƒì´ë‹¤. ë°”ë²¨ íŽ˜ì´ì§€ì—ì„œ Nodemonì„ ì„ íƒí•˜ë©´ ì„¤ì¹˜ ëª…ë ¹ì„ ì•Œ ìˆ˜ ìžˆë‹¤. `npm install @babel/core @babel/node --save-dev`ë¡œ ì„¤ì¹˜í•œ í›„ì— devDependenciesë¥¼ í™•ì¸í•˜ë©´ íŒ¨í‚¤ì§€ê°€ ì„¤ì¹˜ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìžˆë‹¤.

ì´ë²ˆì—ëŠ” scriptsë¥¼ ìˆ˜ì •í•œë‹¤.
```
// package.json
...
"scripts": {
    "dev": "babel-node index.js"
},
...
```
ì´ì „ì—ëŠ” babel-nodeê°€ ì•„ë‹ˆë¼ ê·¸ëƒ¥ nodeê°€ ì í˜€ ìžˆì—ˆë‹¤. ìš°ë¦¬ëŠ” @babel/nodeë¥¼ ì„¤ì¹˜í–ˆê¸° ë•Œë¬¸ì— babel-nodeë¼ëŠ” ëª…ë ¹ì–´ë¥¼ ì“¸ ìˆ˜ ìžˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ index.js íŒŒì¼ì„ ìžë™ìœ¼ë¡œ ë°”ë²¨ë¡œ ë²ˆì—­í•´ì„œ NodeJSë¡œ ì‹¤í–‰í•´ì¤€ë‹¤. scriptsì˜ ëª…ë ¹ ì´ë¦„ì´ devë¡œ ë°”ë€Œì—ˆìœ¼ë¯€ë¡œ ì‹¤í–‰ ë°©ë²•ë„ `npm run dev`ë¡œ ë°”ë€ë‹¤. ì´ì œë¶€í„° ë°”ë²¨ë¡œ ìµœì‹  ìžë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ì„œ `const express = require("express")` ëŒ€ì‹ ì— `import express from "express"`ë¥¼ ëŒ€ì‹  ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤.

í•˜ì§€ë§Œ íŒŒì¼ì´ ìˆ˜ì •ë ë•Œë§ˆë‹¤ ì¼ì¼ì´ íŒŒì¼ì„ ìƒˆë¡œ ì‹œìž‘í•˜ê³  ì‹¶ì§€ ì•Šë‹¤. ì´ë•Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ Nodemonì´ë‹¤. Nodemonì€ íŒŒì¼ì´ ìˆ˜ì •ë˜ë©´ ì•Œì•„ì„œ ìž¬ì‹œìž‘í•´ì£¼ë¯€ë¡œ ë§¤ë²ˆ npm run devë¥¼ ìž…ë ¥í•  í•„ìš”ê°€ ì—†ë‹¤. ìš°ì„  `npm i nodemon --save-dev`ìœ¼ë¡œ Nodemonì„ ì„¤ì¹˜í•´ì¤€ë‹¤. ì´ì œ package.json íŒŒì¼ì˜ scriptsë¥¼ ìˆ˜ì •í•´ì¤€ë‹¤.
```
// package.json
...
"scripts": {
    "dev": "nodemon --exec babel-node index.js"
},
...
```
ì´ë²ˆì— npm run devë¡œ ì‹¤í–‰í•˜ë©´ ì½”ë“œê°€ ëë‚˜ì§€ ì•ŠëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìžˆë‹¤. ì´ ë•Œ, index.js íŒŒì¼ì„ ìˆ˜ì •í•´ì„œ consoleì— ì´ê²ƒì €ê²ƒ ì¶œë ¥í•˜ê²Œ ë§Œë“¤ì–´ë³´ìž. ê·¸ëŸ¬ë©´ ìˆ˜ì •ëœ íŒŒì¼ì„ ì¸ì‹í•´ì„œ ìžë™ìœ¼ë¡œ íŒŒì¼ì„ ìƒˆë¡œ ì‹œìž‘í•´ ì£¼ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìžˆë‹¤.

ì •ë¦¬í•˜ë©´ ì²˜ìŒì— ìš°ë¦¬ëŠ” `node index.js`ë¡œ íŒŒì¼ì„ ì‹¤í–‰ì‹œì¼°ë‹¤. ì´ëŠ” ë…¸ë“œë¡œ index.js íŒŒì¼ì„ ì‹¤í–‰ ì‹œí‚¨ ê²ƒì„ ì˜ë¯¸í•œë‹¤. í•˜ì§€ë§Œ ë…¸ë“œëŠ” ìµœì‹  ìžë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì´í•´í•˜ì§€ ëª»í•  ë•Œê°€ ìžˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ë°”ë²¨ì„ ì‚¬ìš©í•´ì„œ ìµœì‹  ìžë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìžˆê²Œ í–ˆë‹¤. ê·¸ëž˜ì„œ `babel-node index.js`ë¡œ ì‹¤í–‰í–ˆë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ ìš°ë¦¬ëŠ” íŒŒì¼ì´ ìˆ˜ì •ë˜ë©´ ìžë™ìœ¼ë¡œ ìž¬ì‹¤í–‰ë˜ë„ë¡ í•˜ë ¤ê³  ë…¸ë“œëª¬ì„ ì„¤ì¹˜í–ˆë‹¤. ìµœì¢…ì ìœ¼ë¡œ ì½”ë“œëŠ” `nodemon --exec babel-node index.js`ê°€ ë˜ì—ˆë‹¤. ê·¸ëž˜ì„œ ì½˜ì†”ì´ ì¢…ë£Œë˜ì§€ ì•Šê³  íŒŒì¼ì´ ë³€í• ë•Œë§ˆë‹¤ ë§¤ë²ˆ ëª…ë ¹ì–´ë¥¼ ìƒˆë¡œ ì‹œìž‘í•´ì£¼ê²Œ ë˜ì—ˆë‹¤.

## Introduction To Express

### 3.0 Your First Server
íŒŒì¼ì´ êµ‰ìž¥ížˆ ë§Žê¸° ë•Œë¬¸ì— ì½”ë“œë¥¼ í¬í•¨í•˜ê³  ìžˆëŠ” íŒŒì¼ì€ ì•žìœ¼ë¡œ src í´ë”ì— ì €ìž¥í•œë‹¤. ìš°ì„  ìžë°”ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì˜ ì´ë¦„ì„ ë°”ê¿”ì¤€ë‹¤. index.js ëŒ€ì‹ ì— server.jsë¥¼ ì‚¬ìš©í•œë‹¤. ê·¸ ì´ìœ ëŠ” ì•žìœ¼ë¡œ ì´ íŒŒì¼ì— ì„œë²„ì™€ ê´€ë ¨ëœ ì½”ë“œë¥¼ ìž‘ì„±í•  ì˜ˆì •ì´ê¸° ë•Œë¬¸ì´ë‹¤. ê·¸ í›„ scr í´ë”ì— server.js íŒŒì¼ì„ ì˜®ê²¨ì¤€ë‹¤. ê·¸ëŸ°ë° ìš°ë¦¬ëŠ” íŒŒì¼ì˜ ì´ë¦„ì„ ë°”ê¾¸ê³  ì˜®ê²¼ê¸° ë•Œë¬¸ì— package.jsonì˜ scripts ëª…ë ¹ì—ì„œ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ê²Œ ëœë‹¤. ê·¸ëŸ¬ë¯€ë¡œ `"dev": "nodemon --exec babel-node src/server.js"`ë¡œ ì½”ë“œë¥¼ ì½”ì³ì¤€ë‹¤.

ë‹¤ìŒìœ¼ë¡œ server.js íŒŒì¼ì„ ê³ ì³ë³´ê² ë‹¤. ìš°ì„  ì½”ë“œì— `import express from "express";`ë¥¼ ìž‘ì„±í•œë‹¤. ì´ë•Œ expressëŠ” node_modulesì— ìžˆì§€ë§Œ ìœ„ì¹˜ë¥¼ ì ì§€ ì•Šì•„ë„ NodeJsê°€ ì•Œì•„ì„œ node_modules ì•„ëž˜ì—ì„œ íŒ¨í‚¤ì§€ë¥¼ ì°¾ëŠ”ë‹¤. expressë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” `const app = express();`ë¥¼ ì ì–´ì¤€ë‹¤. ì´ë¦„ì´ ê¼­ appì¼ í•„ìš”ëŠ” ì—†ì§€ë§Œ íŽ¸ì˜ë¥¼ ìœ„í•´ ê·¸ë ‡ê²Œ ì ì–´ì¤€ë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ì–´í”Œë¦¬ì¼€ì´ì…˜ì— ìƒê¸´ ê²ƒì´ë‹¤. ì´ì œ í•´ì•¼í•  ì¼ì€ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ìš°ë¦¬ì˜ ìš”ì²­(request)ì„ ë“£ë„ë¡(listen) ë§Œë“œëŠ” ê²ƒì´ë‹¤.

ì—¬ê¸°ì„œ ìž ê¹ ì„œë²„ê°€ ë¬´ì—‡ì¸ì§€ ì•Œì•„ë³´ìž. ì„œë²„ëŠ” í•­ìƒ ì»¤ì ¸ìžˆëŠ” ì»´í“¨í„°ì™€ ê°™ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ê·¸ ì»´í“¨í„°ì— êµ¬ê¸€ì— ê°€ê³  ì‹¶ë‹¤ëŠ” requestë¥¼ ë³´ë‚¸ë‹¤ë©´, ì„œë²„ëŠ” ì´ë¥¼ ë“£ê³ (listen) ê·¸ì— ë§žëŠ” ì‘ë‹µì„ ë³´ë‚¸ë‹¤. ì•žì„œ ìš°ë¦¬ëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“¤ì—ˆë‹¤. ê·¸ë¦¬ê³  ì„œë²„ê°€ ìš”ì²­ì„ ê¸°ë‹¤ë¦¬ë„ë¡ ë§Œë“¤ì–´ì•¼ í•œë‹¤. ì´ ë•Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ `app.listen();`ì´ë‹¤. listenì€ callbackì´ë‹¤. callbackì€ button.addEventListener("click", handleClick) ê°™ì€ ê²ƒì´ë‹¤. ë²„íŠ¼ì„ ëˆ„ë¥´ê²Œ ë˜ë©´ handleClickì´ ì‹¤í–‰ëœë‹¤. ê·¸ëŸ°ë° ì„œë²„ë¥¼ listen í•  ë•Œ, ëª‡ ë²ˆ í¬íŠ¸ë¥¼ listen í•˜ë„ë¡ ë§Œë“¤ì§€ ì •í•´ì•¼ í•œë‹¤. ë³´í†µì€ ë†’ì€ ìˆ«ìžì˜ portê°€ ë¹„ì–´ ìžˆìœ¼ë¯€ë¡œ `app.listen(4000, handleListening);`ì´ë¼ê³  ì“´ë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ì„œë²„ê°€ ì‹¤í–‰ëì„ ë•Œ, handleListeningì´ë¼ëŠ” í•¨ìˆ˜ê°€ ì‹¤í–‰ëœë‹¤.

ë‹¤ìŒìœ¼ë¡œ ë„˜ì–´ê°€ê¸° ì „ì— ìž ì‹œ ì½œë°± í•¨ìˆ˜ë¥¼ ì„¤ëª…í•˜ê² ë‹¤. ì½œë°± í•¨ìˆ˜ë¥¼ ë‹¤ë¥¸ í•¨ìˆ˜ì˜ ì¸ìžë¡œì¨ ì´ìš©ë˜ëŠ” í•¨ìˆ˜, ì´ë²¤íŠ¸ë¡œ í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜ë‹¤. ë‹¤ì‹œ ë§í•´ ì½œë°± í•¨ìˆ˜ëŠ” í•¨ìˆ˜ë¥¼ ë“±ë¡í•˜ê³ , ì–´ë–¤ ì´ë²¤íŠ¸ê°€ ë°œìƒí–ˆì„ ë•Œ ì‹¤í–‰í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë§í•œë‹¤. ìœ„ì—ì„œ handleListeningì€ app.listenì˜ ì¸ìžë¡œ ì‚¬ìš©ë˜ê³ , listenì´ ì¼ì–´ë‚¬ì„ ë•Œ í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜ì´ë¯€ë¡œ callback í•¨ìˆ˜ì¸ ê²ƒì´ë‹¤.

ì•„ì§ handleListeningì´ë¼ëŠ” í•¨ìˆ˜ê°€ ì—†ìœ¼ë¯€ë¡œ ì½”ë“œë¡œ í•˜ë‚˜ ë§Œë“¤ì–´ ì¤€ë‹¤. `const handleListening = () => console.log("Server listening on port 4000")` ì´ë ‡ê²Œ í•˜ë©´ ì„œë²„ê°€ ì‹¤í–‰ëì„ ë•Œ, ì½˜ì†”ì— ê¸€ìžê°€ ë‚˜ì˜¤ê²Œ ëœë‹¤. callback í•¨ìˆ˜ë¥¼ ê¼­ ì´ë ‡ê²Œ ì§€ì •í•  í•„ìš” ì—†ì´ `app.listen(4000, () => console.log("Server listening on port 4000"));`ë¡œ ì ì–´ì¤˜ë„ ëœë‹¤.

ì´ë²ˆì—ëŠ” ì´ë ‡ê²Œ ë§Œë“  ì„œë²„ì— ë“¤ì–´ê°€ë³´ê² ë‹¤. í¬ë¡¬ì—ì„œ localhost:4000ì— ë“¤ì–´ê°€ë©´ Cannot GET / ì˜¤ë¥˜ê°€ ë‚˜ì˜¤ì§€ë§Œ, ì´ì „ê³¼ëŠ” ë‹¬ë¦¬ ë¬´ì—‡ì¸ê°€ ìƒê¸´ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìžˆë‹¤. ì´ì „ì— ì–´ë–¤ í™”ë©´ì´ ë‚˜ì˜¤ëŠ”ì§€ í™•ì¸í•˜ë ¤ë©´ ì„œë²„ë¥¼ ì¢…ë£Œí•˜ê³  ë‹¤ì‹œ ë“¤ì–´ê°€ë³´ë©´ ëœë‹¤. ì°¸ê³ ë¡œ ì„œë²„ë¥¼ ì¢…ë£Œí•˜ë ¤ë©´ Ctrl + cë¥¼ ëˆŒëŸ¬ì£¼ë©´ ëœë‹¤. ê·¸ëŸ¬ë©´ ì½˜ì†”ì„ ë‹¤ì‹œ ì‚¬ìš©í•  ìˆ˜ ìžˆê²Œ ëœë‹¤. ì„œë²„ë¥¼ ì¢…ë£Œí•œ í›„ì— ë‹¤ì‹œ localhost:4000ì— ë“¤ì–´ê°€ë©´ ì´ ì„œë²„ëŠ” ì¡´ìž¬í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì˜¤ë¥˜ê°€ ë‚˜ì˜¤ê²Œ ëœë‹¤. ì¦‰, ì´ì „ê³¼ ë‹¬ë¼ì§„ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìžˆê³ , ì•žì„œ ì„œë²„ë¥¼ ì—´ì—ˆë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìžˆë‹¤.

í¬íŠ¸ ë²ˆí˜¸ ê°™ì€ ìƒìˆ˜ëŠ” ë”°ë¡œ ì§€ì •í•˜ëŠ” ê²ƒì´ ì˜ë¯¸ì ìœ¼ë¡œ íŽ¸í•˜ë‹¤. ê·¸ëŸ¬ë¯€ë¡œ `const PORT = 4000;`ìœ¼ë¡œ í•˜ê³  ì½”ë“œë¥¼ `app.listen(PORT, handleListening);`ìœ¼ë¡œ ê³ ì³ì¤€ë‹¤. handleListeningë„ ì¢€ ë” ì˜ë¯¸ë¥¼ ê°€ì§€ë„ë¡ ```const handleListening = () => console.log(`Server listening on port http://localhost:${PORT}`);```ë¡œ ê³ ì³ì¤€ë‹¤.

ì§€ê¸ˆê¹Œì§€ ìž‘ì„±í•œ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.
```
// server.js
import express from "express";

const PORT = 4000;

const app = express();

const handleListening = () => console.log(`Server listening on port http://localhost:${PORT}`);

app.listen(PORT, handleListening);
```

### 3.1 HTTP GET
HTTP(HyperText Transfer Protocol)ëŠ” ë¬¸ì„œë¥¼ ì „ì†¡í•˜ê¸° ìœ„í•œ ê·œì•½ì´ë‹¤. HTTPëŠ” í”„ë¡œí† ì½œì˜ ì¼ì¢…ìœ¼ë¡œ, ì´ë•Œ í”„ë¡œí† ì½œì€ ì»´í“¨í„°ì—ì„œ ë°ì´í„°ì˜ êµí™˜ ë°©ì‹ì„ ì •í•˜ëŠ” ê·œì•½ì„ ì˜ë¯¸í•œë‹¤. ë‹¤ì‹œë§í•´ HTTPëŠ” ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ì—ì„œ ì–´ë–»ê²Œ ì •ë³´ë¥¼ êµí™˜í• ì§€ ì •í•´ë†“ì€ ì•½ì†ì´ë‹¤. ë³´í†µì€ í´ë¼ì´ì–¸íŠ¸ì¸ ë¸Œë¼ìš°ì €ì—ì„œ ë³´ë‚´ëŠ” ë©”ì„¸ì§€ë¥¼ ìš”ì²­(Request)ë¼ê³  ë¶€ë¥´ê³ , ê·¸ì— ëŒ€ë‹µí•˜ëŠ” ì„œë²„ì˜ ë©”ì„¸ì§€ëŠ” ì‘ë‹µ(Respond)ë¼ê³  í•œë‹¤. ìš°ë¦¬ê°€ ì‚¬ìš©í•˜ëŠ” ì›¹ ë¸Œë¼ìš°ì €ì˜ ì£¼ì†Œë¥¼ ë³´ë©´ http://ë¥¼ ë³¼ ìˆ˜ ìžˆë‹¤. ì´ http://ê°€ ë°”ë¡œ í”„ë¡œí† ì½œì„ ì‚¬ìš©í•´ì„œ ì •ë³´ë¥¼ êµí™˜í•œë‹¤ëŠ” í‘œì‹œë¡œ, ì¸í„°ë„· ì£¼ì†Œ(URL)ë¡œ ì •ë³´ë¥¼ ì¡°íšŒí•  ìˆ˜ ìžˆë‹¤. HTTPê°€ ë³´ë‚´ëŠ” ìš”ì²­ì€ ë‹¤ì–‘í•œ ê²ƒì´ ìžˆì§€ë§Œ ì´ë²ˆì—ëŠ” GETë§Œ ì•Œì•„ë³¼ ê²ƒì´ë‹¤. GETì€ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ë•Œ ì‚¬ìš©í•˜ëŠ” ê²ƒìœ¼ë¡œ ì •í•´ì§„ ì£¼ì†Œë¡œë¶€í„° ì •ë³´ë¥¼ ë°›ì•„ì˜¤ëŠ” ê²ƒì´ë‹¤. ì„œë²„ë¥¼ ì‹¤í–‰í•˜ê³  localhost:4000ì— ë“¤ì–´ê°€ë³´ìž. ê·¸ëŸ¬ë©´ Cannot GET / ë¼ëŠ” ë©”ì„¸ì§€ë§Œ í™•ì¸í•  ìˆ˜ ìžˆë‹¤. ë¨¼ì € /ëŠ” rootë¥¼, ë‹¤ì‹œ ë§í•´ ì²« íŽ˜ì´ì§€ë¥¼ ì˜ë¯¸í•œë‹¤. ë‹¤ìŒìœ¼ë¡œ GETì€ HTTP methodì´ë¯€ë¡œ GET /ëŠ” HTTPë¡œ ì²« íŽ˜ì´ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ëª…ë ¹ì´ë‹¤. ê·¸ëŸ°ë° ìš°ë¦¬ëŠ” ì²« íŽ˜ì´ì§€ë¥¼ ë§Œë“¤ì–´ì£¼ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ ì˜¤ë¥˜ê°€ ë‚˜ê²Œ ëœë‹¤.

### 3.2 GET Requests part Two
ì•žìœ¼ë¡œ ìž‘ì„±í•  ì½”ë“œëŠ” ëª¨ë‘ `const app = express();` ë‹¤ìŒì— ì™€ì•¼ í•œë‹¤. ì™œëƒí•˜ë©´ appìœ¼ë¡œ ë§Œë“¤ì–´ì£¼ê³  listenìœ¼ë¡œ ìš”ì²­ì„ ê¸°ë‹¤ë¦¬ëŠ”ë°, ê·¸ ì‚¬ì´ì— ê¸°ëŠ¥ì„ ë„£ì–´ì¤˜ì•¼ í•˜ê¸° ë•Œë¬¸ì´ë‹¤. ì„œë²„ë¥¼ ì‹¤í–‰í•˜ë©´ GETìœ¼ë¡œ /ë¥¼ ìš”ì²­í•˜ê³  ìžˆìœ¼ë¯€ë¡œ ì´ì— ì‘ë‹µí•´ì•¼ í•œë‹¤. í•˜ì§€ë§Œ ê·¸ ì „ì— ì½˜ì†”ë¡œ ì¶œë ¥í•´ë³´ê² ë‹¤. ì½”ë“œë¥¼ ìž‘ì„±í•˜ê¸° ì „ì— í‹€ì„ í•œ ë²ˆ ì•Œì•„ë³´ìž. ìš°ë¦¬ê°€ ìž‘ì„±í•  ì½”ë“œëŠ” `app.get(address, callback)` í˜•íƒœë‹¤. ì´ ì½”ë“œì˜ ì˜ë¯¸ë‚œ appì´ addressì— get ìš”ì²­ì„ ë³´ëƒˆì„ ë•Œ, callbackì´ ì‹¤í–‰ëœë‹¤ëŠ” ì˜ë¯¸ë‹¤. ìš°ë¦¬ëŠ” /ë¡œ ê°”ì„ ë•Œ, callbackì´ ì‹¤í–‰ë˜ë„ë¡ í•˜ê³  ì‹¶ë‹¤. ê·¸ëŸ¬ë¯€ë¡œ `app.get("/", () => console.log("Get Home"));`ì„ ì ì–´ì¤€ë‹¤. ì´ ì½”ë“œì˜ ëœ»ì€ appì—ì„œ getìœ¼ë¡œ /ì— ê°€ë ¤ê³  í•˜ë©´ ì½˜ì†”ì— ë¬¸ìž¥ì´ ì¶œë ¥ë˜ê²Œ í•˜ëŠ” ê²ƒì´ë‹¤. ì£¼ì˜í•  ê²ƒì€ callbackì— ë‹¨ìˆœížˆ console.logë¡œ ì ì–´ì£¼ë©´ ì•ˆ ëœë‹¤. callback í•¨ìˆ˜ë¥¼ ì ì–´ì¤˜ì•¼ í•˜ë¯€ë¡œ ê¼­ () => console.log í˜•íƒœê°€ ë˜ë„ë¡ í•´ì•¼ í•œë‹¤. ì´ ë°©ì‹ì´ ë¶ˆíŽ¸í•˜ë©´ ë”°ë¡œ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ì„œ ë‹¤ë¤„ì¤˜ë„ ëœë‹¤.

ì—¬ê¸°ê¹Œì§€ ìž‘ì„±í•˜ê³  ì„œë²„ë¥¼ ìƒˆë¡œê³ ì¹¨ í•˜ë©´ ë¸Œë¼ìš°ì €ê°€ ë¶ˆëŸ¬ì˜¤ê¸°ì—ì„œ ë©ˆì¶˜ ê²ƒì„ ë³¼ ìˆ˜ ìžˆë‹¤. ì½˜ì†”ì„ í™•ì¸í•˜ë©´ Get Homeì´ ì¶œë ¥ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìžˆë‹¤. ì¦‰, ë¸Œë¼ìš°ì €ëŠ” get requestë¥¼ ë³´ë‚´ê³  ìžˆëŠ”ë° ì„œë²„ëŠ” app.getìœ¼ë¡œ ì–´ë–»ê²Œ ì‘ë‹µí•´ì•¼í•˜ëŠ”ì§€ ì•Œê²Œ ë˜ì—ˆìœ¼ë¯€ë¡œ ì‘ë‹µí•œë‹¤. ê·¸ëŸ°ë° ìš°ë¦¬ëŠ” ì½˜ì†”ì— ì¶œë ¥ë§Œ í•  ë¿, ì•„ë¬´ëŸ° ì‘ë‹µì„ í•˜ê³ ìžˆì§€ ì•Šë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ë¸Œë¼ìš°ì €ëŠ” ì‘ë‹µì´ ëŒì•„ì˜¬ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ê³  ìžˆê³  ë¶ˆëŸ¬ì˜¤ê¸° ë‹¨ê³„ì— ë¨¸ë¬¼ëŸ¬ ìžˆê²Œ ëœë‹¤. 

```
// server.js
import express from "express";

const PORT = 4000;

const app = express();

const handleHome = () => console.log("Somebody is trying to go home");

app.get("/", handleHome);

const handleListening = () => console.log(`Server listening on port http://localhost:${PORT}`);

app.listen(PORT, handleListening);
```

### 3.3 Responses
ë¸Œë¼ìš°ì €ê°€ ì‘ë‹µì„ ê³„ì† ê¸°ë‹¤ë¦¬ê³  ìžˆê¸° ë•Œë¬¸ì— ê°•ì œë¡œ êº¼ì¤˜ì•¼ í•œë‹¤. Ctrl + cë¡œ ì„œë²„ë¥¼ ì¢…ë£Œí•˜ê³  ë‹¤ì‹œ ë¸Œë¼ìš°ì €ë¡œ ëŒì•„ê°€ë©´ localhost refused to conntectë¼ëŠ” ì—ëŸ¬ê°€ ëœ¬ë‹¤. ì´ë²ˆì—ëŠ” ë¸Œë¼ìš°ì €ì— ì‘ë‹µí•˜ëŠ” ë°©ë²•ì„ ë°°ì›Œë³´ê² ë‹¤. ê·¸ì „ì— ìž ì‹œ ìžë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë³µìŠµí•´ë³´ê² ë‹¤. ìžë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ `button.addEventListener("click", handleClick);`ê³¼ ê°™ì€ ì½”ë“œê°€ ìžˆê³  ì—¬ê¸°ì„œ ì½œë°± í•¨ìˆ˜ `const handleClick = (event) => {...}` í˜•íƒœê°€ ë˜ëŠ” ê²ƒì„ ê¸°ì–µí•  ê²ƒì´ë‹¤. ì—¬ê¸°ì„œ ë³´ë“¯ì´ handleClickì´ ì½œë°± í•¨ìˆ˜ë¡œ ì“°ì¼ë•Œ, eventë¥¼ ë³€ìˆ˜ë¡œ ì“°ì´ì§€ë§Œ addEventListenerì—ëŠ” ì í˜€ìžˆì§€ ì•Šë‹¤. ì´ëŠ” ë¸Œë¼ìš°ì €ê°€ ìžë™ìœ¼ë¡œ ì²˜ë¦¬í•´ì£¼ê¸° ë•Œë¬¸ì´ë‹¤.

ì´ì™€ ë™ì¼í•œ ì¼ì´ expressì—ì„œë„ ì¼ì–´ë‚œë‹¤. ìµìŠ¤í”„ë ˆìŠ¤ì˜ í•¨ìˆ˜ëŠ” req, resë¥¼ ì¸ìˆ˜ë¡œ ì‚¬ìš©í•œë‹¤. reqëŠ” ìš”ì²­ì„, resëŠ” ì‘ë‹µì„ ì˜ë¯¸í•œë‹¤. ì´ë¦„ì´ ê¼­ req, resë¡œ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆì§€ë§Œ, êµ³ì´ ë‹¤ë¥¸ ì´ë¦„ì„ ì‚¬ìš©í•  í•„ìš”ëŠ” ì—†ìœ¼ë¯€ë¡œ ì €ëŒ€ë¡œ ì“´ë‹¤. app.getì´ ì¼ì–´ë‚˜ë©´ handleHomeì— req, res ë‘ ì¸ìˆ˜ê°€ ì „ë‹¬ì´ ëœë‹¤. ìš°ì„ ì€ reqê°€ ë¬´ì—‡ì¸ì§€ ì•Œê¸° ìœ„í•´ console.logë¡œ ì¶œë ¥ì‹œì¼œë³´ìž. ê·¸ëŸ¬ë¯€ë¡œ ì½”ë“œëŠ” ì•„ëž˜ì²˜ëŸ¼ ë  ê²ƒì´ë‹¤.

```
// server.js
...
const handleHome = (req, res) => {
    console.log(req);
};

app.get("/", handleHome);
...
```

ì´ë ‡ê²Œ í•˜ë©´ ì•„ì§ ë¸Œë¼ìš°ì €ì— ì‘ë‹µì„ ë³´ë‚´ì§€ ì•Šì•„ì„œ ë¸Œë¼ìš°ì €ëŠ” ê³„ì† ë™ìž‘í•œë‹¤. ê·¸ë¦¬ê³  ì½˜ì†”ì„ í™•ì¸í•˜ë©´ ì´ê²ƒì €ê²ƒ ì¶œë ¥ë˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìžˆë‹¤. ê·¸ ì¤‘ì—ì„œë„ url, methodë‚˜ ì‚¬ìš©ìžì˜ osë“± ë‹¤ì–‘í•œ ì •ë³´ê°€ ìžˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìžˆë‹¤. req ëŒ€ì‹ ì— resë¥¼ ì¶œë ¥ ì‹œì¼œë„ ë¹„ìŠ·í•œ ê²ƒë“¤ì´ ë‚˜ì˜¨ë‹¤. ë‹¤ìŒìœ¼ë¡œ ì‘ë‹µì„ ì „ë‹¬í•´ë³´ê² ë‹¤. ì‘ë‹µì€ handleHomeì—ë‹¤ê°€ `return res.end();`ë¥¼ ì ì–´ì¤˜ì„œ ê°€ëŠ¥í•˜ë‹¤. ì´ë ‡ê²Œ í•˜ê³  íŽ˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ë©´ ë¸Œë¼ìš°ì €ëŠ” ë¹ˆí™”ë©´ìœ¼ë¡œ ë‚˜ì˜¨ë‹¤. ì•„ë¬´ê²ƒë„ ë‚˜ì˜¤ì§„ ì•Šì§€ë§Œ, ë¸Œë¼ìš°ì €ê°€ ì‘ë‹µì„ ê³„ì† ê¸°ë‹¤ë¦¬ì§„ ì•ŠëŠ”ë‹¤. ì‘ë‹µì„ ë³´ë‚´ëŠ” ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œ sendê°€ ìžˆëŠ”ë°, `return res.send("This is end message");` ì²˜ëŸ¼ ì‚¬ìš©í•œë‹¤. ì´ë ‡ê²Œ í•˜ê³  íŽ˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ë©´ íŽ˜ì´ì§€ì— ê¸€ìžê°€ ë‚˜ì˜¤ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìžˆë‹¤.

```
// server.js
...
const handleHome = (req, res) => {
    return res.send("This is end message"); // or return res.end();
};

app.get("/", handleHome);
...
```

íŽ˜ì´ì§€ë¥¼ í•˜ë‚˜ ë” ë§Œë“¤ì–´ì„œ ë˜‘ê°™ì´ ì ìš©í•´ë³´ê² ë‹¤. ì´ë²ˆì—ëŠ” /login íŽ˜ì´ì§€ë¥¼ ë§Œë“¤ì–´ì„œ handleLoginì„ ì‚¬ìš©í•  ê²ƒì´ë‹¤. ê·¸ëŸ¬ë©´ ì½”ë“œëŠ” ì•„ëž˜ì²˜ëŸ¼ ì ì–´ì£¼ë©´ ëœë‹¤.

```
// server.js
...
const handleHome = (req, res) => {
    return res.send("This is end message"); // or return res.end();
};

const handleLogin = (req, res) => {
    return res.send("This is Login Page");
};

app.get("/", handleHome);
app.get("/login", handleLogin);
...
```

localhost:4000/loginì— ë“¤ì–´ê°€ë³´ë©´ This is Login Pageê°€ ì¶œë ¥ëœë‹¤. 

### 3.4 Recap
[Express](https://expressjs.com/ko/)ì— ë“¤ì–´ê°€ë©´ ìµìŠ¤í”„ë ˆìŠ¤ì— ê´€í•œ ì„¤ëª…ì„ ë³¼ ìˆ˜ ìžˆë‹¤. ì˜¤ë¥¸ìª½ ìœ„ì˜ í•­ëª©ì„ ë³´ë©´ ì•Œê² ì§€ë§Œ ìµìŠ¤í”„ë ˆìŠ¤ëŠ” ê·¸ë ‡ê²Œ í¬ì§€ ì•Šê³ , ë³µìž¡í•˜ì§€ë„ ì•Šë‹¤. ì‹œìž‘í•˜ê¸°ì™€ ì•ˆë‚´ì„œì˜ ë‚´ìš©ë„ êµ‰ìž¥ížˆ ìœ ìš©í•˜ê¸° ë•Œë¬¸ì— ë§‰ížˆëŠ” ë¶€ë¶„ì´ ìƒê¸°ë©´ ì½ì–´ë³¼ ê²ƒì„ ì¶”ì²œí•œë‹¤. í•˜ì§€ë§Œ ì´ë²ˆì— ë‹¤ë£° ê²ƒì€ APIë‹¤. ì˜¤ë¥¸ìª½ ìœ„ì˜ API ì°¸ì¡°ë¥¼ ëˆ„ë¥´ë©´ express(), Application, Request, Response, Routerë¡œ 5ê°€ì§€ê°€ ì¡´ìž¬í•œë‹¤. ëª‡ëª‡ì„ í™•ì¸í•´ë³´ë©´ ì§€ê¸ˆê¹Œì§€ ìš°ë¦¬ê°€ ì¼ë˜ ê¸°ëŠ¥ë“¤ì„ ë³¼ ìˆ˜ ìžˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ Applicationì„ ì—´ì–´ë³´ë©´ app.get(), app.listen()ì´ ìžˆê³ , Responseì—ëŠ” res.end(), res.send() ë“±ì´ ìžˆë‹¤. ìš°ë¦¬ëŠ” ì´ë¯¸ ì´ APIì˜ ê¸°ëŠ¥ì„ ì•Œê³  ìžˆë‹¤. íŽ˜ì´ì§€ ì‹œìž‘í•˜ê±°ë‚˜, ì½œë°± í•¨ìˆ˜ê°€ ìžˆëŠ” ì •í•´ì§„ pathì— ìš”ì²­ì„ ë³´ë‚´ê±°ë‚˜, ì‘ë‹µì„ ë°›ê±°ë‚˜ ëë‚´ëŠ” ë“±ì˜ ì¼ì„ í•œë‹¤. ê·¸ë ‡ë‹¤ë©´ APIëŠ” ë¬´ì—‡ì´ê¸¸ëž˜ ì´ëŸ° ê¸°ëŠ¥ë“¤ì„ í• ê¹Œ?

API(Application Programming Interface)ë¥¼ ì„¤ëª…í•˜ê¸° ì „ì— Interfaceë¥¼ ì„¤ëª…í•˜ê² ë‹¤. ì¸í„°íŽ˜ì´ìŠ¤ëŠ” ì„œë¡œ ë‹¤ë¥¸ ë‘ ì‹œìŠ¤í…œ ì‚¬ì´ì— ì •ë³´ë¥¼ ì£¼ê³ ë°›ëŠ” ê²½ê³„ë©´ì´ë‹¤. ê²½ê³„ë©´ì´ëž€ ìž¥ì†Œ/ë°©ë²•/ë°©ë²• ë“±ì„ í¬ê´„í•˜ëŠ” ë§ë¡œ ê°„ë‹¨ížˆ ë§í•´ ì¸í„°íŽ˜ì´ìŠ¤ëŠ” ì •ë³´ë¥¼ ì£¼ê³  ë°›ëŠ” ë°©ë²•ì´ë¼ê³  í•  ìˆ˜ ìžˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì‚¬ëžŒì€ í‚¤ë³´ë“œë‚˜ ë§ˆìš°ìŠ¤ë¥¼ í†µí•´ ì»´í“¨í„°ì— ë°ì´í„°ë¥¼ ì „ì†¡í•œë‹¤. ì´ì²˜ëŸ¼ ì‚¬ëžŒê³¼ ê¸°ê³„ì˜ ì†Œí†µì„ ìœ„í•œ ë°©ë²•ì„ UI(User Interface)ë¼ê³  í•œë‹¤.

APIë„ ì¸í„°íŽ˜ì´ìŠ¤ì˜ ì¼ì¢…ìœ¼ë¡œ í”„ë¡œê·¸ëž¨ ê°„ì— ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ëŠ” ë°©ë²•ì„ ì˜ë¯¸í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ Cì—ì„œ ë¬¸ìž¥ì„ ì¶œë ¥í•œë‹¤ê³  í•´ë³´ìž. printf APIë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì§ì ‘ ì»´í“¨í„°ì˜ ë©”ëª¨ë¦¬ì— ë¬¸ìžì—´ì„ ë§Œë“¤ì–´ ì¶œë ¥í•˜ë„ë¡ ìš´ì˜ì²´ì œì— ëª…ë ¹ì„ ë³´ë‚´ì•¼ í•œë‹¤. í•˜ì§€ë§Œ APIë¥¼ ì‚¬ìš©í•˜ë©´ í”„ë¡œê·¸ëž˜ë¨¸ê°€ ìž‘ì„±í•œ ì½”ë“œë¥¼ APIê°€ ì»´í“¨í„°ì— ì •ë³´ë¥¼ ì „ë‹¬í•´ì£¼ê¸° ë•Œë¬¸ì— ê°„ë‹¨í•˜ê²Œ printë¬¸ìœ¼ë¡œ ì¶œë ¥í•  ìˆ˜ ìžˆê²Œ ëœë‹¤.

ì´ì²˜ëŸ¼ APIë¥¼ ì‚¬ìš©í•˜ë©´ í”„ë¡œê·¸ëž¨ ê°„ì— ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ì„ ìˆ˜ ìžˆëŠ”ë°, ë§Žì€ íšŒì‚¬ë“¤ì´ APIë¥¼ ì œê³µí•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë‚ ì”¨ APIëŠ” ì§€ì—­ë³„ ë‚ ì”¨ë¥¼ ì œê³µí•˜ê³ , ì•Œë¼ë”˜ APIëŠ” ì±… ì •ë³´ë¥¼ ì œê³µí•˜ëŠ” ë“± íšŒì‚¬ì˜ APIë¥¼ ì‚¬ìš©í•˜ë©´ íŠ¹ì • ë°ì´í„°ë¥¼ êµ‰ìž¥ížˆ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤. ì´ APIê°€ ë™ìž‘í•˜ëŠ” ë°©ì‹ì€ ì„œë²„ì— ë°ì´í„°ë¥¼ ì œê³µí•´ë‹¬ë¼ëŠ” ìš”ì²­ì„ í•˜ë©´, ì„œë²„ëŠ” í•´ë‹¹í•˜ëŠ” ì •ë³´ë¥¼ ë³´ë‚´ì£¼ëŠ” ë°©ì‹ìœ¼ë¡œ ìž‘ë™í•œë‹¤. ê·¸ ê³¼ì •ì—ì„œ ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ëŠ” ì–‘ì‹, ì¸ì¦ ë°©ì‹, í˜¸ì¶œ ì œí•œ ë“±ì„ ë‘ê¸°ë„ í•˜ì§€ë§Œ, í•µì‹¬ì€ ìš”ì²­ì— ë§žëŠ” ë°ì´í„°ë¥¼ ë³´ë‚´ì¤€ë‹¤ëŠ” ê²ƒì´ë‹¤. ê·¸ ì¤‘ì—ì„œë„ ìœ ëª…í•œ ê²ƒì´ RESTful APIì¸ë° ì›¹ì„ ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ” ë°ì´í„° í†µì‹  ë°©ë²•ìœ¼ë¡œ, ì¶œë ¥ê°’ì„ ë°›ëŠ” ë‹¤ë¥¸ APIì™€ ë‹¬ë¦¬ ë°ì´í„°ë¥¼ JSONì´ë‚˜ XMLë¡œ ë°›ì•„ì„œ ì‚¬ìš©í•œë‹¤.

ì—¬ê¸°ê¹Œì§€ ì„¤ëª…ì„ ë³´ë©´ APIëŠ” í”„ë¡œê·¸ëž¨ ì‚¬ì´ì˜ ë°ì´í„° ìš”ì²­ê³¼ ê·¸ì— ì‘ë‹µí•˜ëŠ” ë°©ë²•ì´ëž€ ê²ƒì„ ì•Œ ìˆ˜ ìžˆë‹¤. Expressì˜ APIëŠ” ìµìŠ¤í”„ë ˆìŠ¤ë¡œ íŠ¹ì • ì •ë³´ë¥¼ ìš”ì²­í–ˆì„ ë•Œ, ê·¸ì— ì–´ë–»ê²Œ ì‘ë‹µí•˜ëŠ” ë°©ë²•ì„ ë§Œë“¤ì–´ ë†“ì€ ê²ƒì´ë‹¤. ì•žìœ¼ë¡œ ìš°ë¦¬ëŠ” ë°±ì—”ë“œë¥¼ ë§Œë“¤ê³  ê±°ê¸°ì— ìš”ì²­ì„ í•˜ë©´ ì‘ë‹µì„ ë°›ëŠ” ì¼ì„ í•  ê²ƒì´ë‹¤. ê·¸ë¦¬ê³  APIëŠ” ì´ëŸ° ë°ì´í„° êµí™˜ì„ í•˜ê²Œ í•´ì£¼ëŠ” ê¸°ëŠ¥ìœ¼ë¡œ ì•Œê³  ìžˆìœ¼ë©´ ëœë‹¤.

#### tree
ì—¬ë‹´ìœ¼ë¡œ í´ë”ê°€ ì¡°ê¸ˆì”© ë³µìž¡í•´ì§€ë©´ ê·¸ êµ¬ì¡°ë¥¼ ì¶œë ¥í•˜ê³  ì‹¶ì„ ë•Œê°€ ìžˆë‹¤. ì´ëŠ” ë””ë ‰í„°ë¦¬ êµ¬ì¡°ë¥¼ ì¶œë ¥í•˜ëŠ” ë°©ë²•ì„ ì°¾ì•„ë³´ë©´ ë˜ëŠ”ë°, ë§¥ì—ì„œëŠ” treeë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤. ë‹¤ë¥¸ ìš´ì˜ì²´ì œë„ ê°ìž ë””ë ‰í† ë¦¬ ì¶œë ¥ë²•ì´ ìžˆìœ¼ë¯€ë¡œ í•„ìš”í•˜ë©´ ì°¾ì•„ë³´ìž. ë§¥ì—ì„œëŠ” í„°ë¯¸ë„ì„ ì—° í›„ `brew install tree`ë¡œ treeë¥¼ ì„¤ì¹˜í•´ì¤€ë‹¤. ê·¸ í›„ ì›í•˜ëŠ” í´ë”ì— ë“¤ì–´ê°€ì„œ treeë§Œ ìž…ë ¥í•˜ë©´ í´ë”ì˜ êµ¬ì¡°ë¥¼ ì¶œë ¥í•´ì¤€ë‹¤. ì„¸ì„¸í•œ ì‚¬í•­ì€ `tree --help`ë¡œ í™•ì¸í•´ë³´ìž.

### 3.5 MiddleWares Part One
MiddlewareëŠ” ì´ë¦„ ê·¸ëŒ€ë¡œ Middle Softwareì´ë‹¤. ë¯¸ë“¤ì›¨ì–´ëŠ” ìš”ì²­ê³¼ ì‘ë‹µ ì‚¬ì´ì— ìžˆë‹¤. ì§€ê¸ˆê¹Œì§€ handlerë¼ê³  í–ˆë˜ ê²ƒì€ ì‚¬ì‹¤ controllerì¸ë° controllerì€ req, res ë¿ë§Œ ì•„ë‹ˆë¼ nextë¼ëŠ” ì¸ìžë¥¼ ê°€ì§€ê³  ìžˆë‹¤. nextëŠ” ë‹¤ìŒ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì¤€ë‹¤.

```
// server.js
...
const gossipMiddleware = (req, res, next) => {
    console.log("I'm in the middle!");
    next();
};

const handleHome = (req, res, next) => {
    return res.end();
};

app.get("/", gossipMiddleware, handleHome);
...
```

ìœ„ì˜ ì½”ë“œëŠ” ë¸Œë¼ìš°ì €ëŠ” /ì— ê°€ë ¤ê³  í•œë‹¤. ê·¸ëŸ¬ë©´ gossipMiddlewareê°€ ì‹¤í–‰ëœë‹¤. ê·¸ë¦¬ê³  next()ê°€ ì‹¤í–‰ë˜ê³  ë‹¤ìŒ í•¨ìˆ˜ì¸ handleHomedã…£ ì‹¤í–‰ëœë‹¤. ì´ë•Œ, handleHomeì€ finalwareê°€ ëœë‹¤. ì´ë•Œ, middlewareì—ì„œ return res.send() ê°™ì€ ì¢…ë£Œ ì‹œí‚¤ëŠ” ë¬¸êµ¬ê°€ nextë³´ë‹¤ ë¨¼ì € ì˜¬ ê²½ìš° ë‹¤ìŒ í•¨ìˆ˜ëŠ” ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤. ì´ëŠ” ë‹¹ì—°í•œ ê²ƒì´ ë¨¼ì € ë°˜í™˜í•´ë²„ë¦¬ë©´ nextê°€ ì‹¤í–‰ë  ê¸°íšŒê°€ ì—†ê¸° ë•Œë¬¸ì´ë‹¤. middlewareëŠ” ë‹¤ì–‘í•œ ë°©ë²•ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìžˆëŠ”ë°, ì´ë²ˆì—ëŠ” ìš”ì²­í•˜ëŠ” íŽ˜ì´ì§€ì˜ urlì„ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë¥¼ ìƒê°í•´ë³´ê² ë‹¤.

```
// server.js
...
const gossipMiddleware = (req, res, next) => {
    console.log(`Someone is going to: ${req.url}`);
    next();
};

const handleHome = (req, res, next) => {
    return res.end();
};

app.get("/", gossipMiddleware, handleHome);
...
```

ìœ„ì˜ í•¨ìˆ˜ëŠ” ì‚¬ìš©ìžê°€ ê°€ë ¤ëŠ” íŽ˜ì´ì§€ì˜ urlì„ ë°˜í™˜í•˜ê² ì§€ë§Œ, ì§€ê¸ˆì€ /ì—ë§Œ ì ìš©ë˜ì–´ ìžˆìœ¼ë¯€ë¡œ ë¬´ì“¸ëª¨í•˜ë‹¤. ì´ë¥¼ ë‹¤ìŒ ê°•ì˜ì—ì„œ ê³ ì³ë³´ê² ë‹¤.

### 3.6 MiddleWares Part Two
ì´ë²ˆì— ë°°ì›Œë³¼ ê²ƒì€ `app.use()`ë‹¤. app.useëŠ” global middlewareë¥¼ ë§Œë“¤ê²Œ í•´ì¤€ë‹¤. ë‹¤ì‹œ ë§í•´ ì–´ë–¤ urlì—ì„œë„ ì‹¤í–‰ë˜ëŠ” middlewareë‹¤. ì£¼ì˜í•  ê²ƒì€ í•˜ë‚˜ë¿ì´ë‹¤. app.useê°€ app.getë³´ë‹¤ ë¨¼ì € ì™€ì•¼í•œë‹¤. ë§Œì•½ ìˆœì„œê°€ ë°˜ëŒ€ë¡œ ë˜ë©´ app.getì´ ì¼ì–´ë‚ ë•Œ, app.userê°€ ì ìš©ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ middlewareê°€ ì‹¤í–‰ë˜ì§€ ì•Šê²Œ ëœë‹¤. app.useì˜ ì‚¬ìš©ë²•ì€ ê°„ë‹¨í•˜ë‹¤. ê·¸ì € ì‚¬ìš©í•˜ê³  ì‹¶ì€ middlewareì˜ ì´ë¦„ì„ ì ì–´ì£¼ë©´ ëœë‹¤.

```
// server.js
...
const gossipMiddleware = (req, res, next) => {
    console.log(`Someone is going to: ${req.url}`);
    next();
};

const handleHome = (req, res, next) => {
    return res.end();
};

app.user(gossipMiddleware);
app.get("/", handleHome);
...
```

ë¯¸ë“¤ì›¨ì–´ëŠ” ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œë„ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤. if-elseë¬¸ì„ ì‚¬ìš©í•´ì„œ íŠ¹ì • urlì—ì„œë§Œ ì‹¤í–‰ë˜ê³  ë‹¤ë¥¸ urlì—ì„œëŠ” nextê°€ ì‹¤í–‰ë˜ë„ë¡ í•  ìˆ˜ë„ ìžˆë‹¤.

```
const privateMiddleware = (req, res, next) => {
    if(req.url === "/private") {
        return res.send("<h1>Not Allowed</h1>);
    }
    console.log("Allowed, you may continue.");
    next();
};
```

### 3.7 Setup Recap
ê°„ë‹¨í•˜ê²Œ ì§€ê¸ˆê¹Œì§€ ë°°ìš´ ê²ƒì„ package.json íŒŒì¼ë¶€í„° ì •ë¦¬í•´ë³´ê² ë‹¤. ìš°ë¦¬ê°€ package.jsonì—ì„œ ë°”ê¾¼ ê²ƒì€ scripts, dependencies, Devdependenciesë‹¤. ë¨¼ì € scriptsëŠ” ë³µìž¡í•œ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ëŠ” ë³„ëª…ì„ ë§Œë“¤ì–´ì¤€ë‹¤. ìš°ë¦¬ëŠ” devë¼ëŠ” scriptsë¥¼ ë§Œë“¤ì—ˆë‹¤. ì„œë²„ë¥¼ ì‹¤í–‰í•˜ë ¤ë©´ ë§¤ë²ˆ `nodemon --exec babel-node index.js`ë¥¼ ìž…ë ¥í•´ì•¼ í•œë‹¤. í•˜ì§€ë§Œ ì´ ëª…ë ¹ì–´ëŠ” êµ‰ìž¥ížˆ ê¸¸ì–´ì„œ êµ‰ìž¥ížˆ ë²ˆê±°ë¡­ë‹¤. ê·¸ëž˜ì„œ scriptsë¡œ ì´ë¥¼ ëŒ€ì²´í•˜ëŠ” ê°„ë‹¨í•œ ëª…ë ¹ì–´ë¥¼ ë§Œë“¤ ìˆ˜ ìžˆë‹¤. ì´ë¥¼ ìœ„í•´ ìš°ë¦¬ëŠ” devë¼ëŠ” ëª…ë ¹ì–´ë¥¼ ë§Œë“¤ì—ˆë‹¤. `"dev": "nodemon --exec babel-node index.js"`ë¥¼ ì‚¬ìš©í•˜ë©´ ìš°ë¦¬ëŠ” `npm run dev`ë§Œìœ¼ë¡œ ì € ë³µìž¡í•œ ëª…ë ¹ì–´ë¥¼ ëŒ€ì²´í•  ìˆ˜ ìžˆë‹¤.

ë‹¤ìŒìœ¼ë¡œ dependenciesëŠ” í”„ë¡œì íŠ¸ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•œ íŒ¨í‚¤ì§€ ëª¨ìŒì´ë‹¤. ì´ê³³ì—ëŠ” í•„ìš”í•œ íŒ¨í‚¤ì§€ì™€ ê·¸ ë²„ì „ì´ ì í˜€ìžˆê¸° ë•Œë¬¸ì— ë‹¤ë¥¸ ì»´í“¨í„°ì—ì„œ ìž‘ì—…í•  ë•Œ package.jsonë§Œ ìžˆìœ¼ë©´ `npm i`ë¡œ í•„ìš”í•œ íŒ¨í‚¤ì§€ë¥¼ ë‹¤ìš´ ë°›ì„ ìˆ˜ ìžˆë‹¤. DevdependenciesëŠ” ê°œë°œìžë¥¼ ìœ„í•œ íŒ¨í‚¤ì§€ë¡œ, ìš°ë¦¬ëŠ” Nodemonìœ¼ë¡œ íŒŒì¼ì´ ìˆ˜ì •ë  ë•Œë§ˆë‹¤ ìž¬ì‹¤í–‰ì‹œì¼œì£¼ê³ , Babelë¡œ ìµœì‹  ìžë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ NodeJSì— ë§žê²Œ ë²ˆì—­ì‹œí‚¨ë‹¤. dependenciesì™€ Devdependencies ëª¨ë‘ node_modulesì— ì €ìž¥ëœë‹¤. ìš”ì•½í•˜ë©´ dependenciesëŠ” í”„ë¡œì íŠ¸ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•œ í•„ìˆ˜ì ì¸ íŒ¨í‚¤ì§€ê³ , DevdependenciesëŠ” ê°œë°œìžë¥¼ ë„ì™€ì£¼ëŠ” íŒ¨í‚¤ì§€ë‹¤.

### 3.8 Servers Recap
ì„œë²„ëŠ” ìš”ì²­ì„ ê¸°ë‹¤ë¦¬ê³  ìžˆëŠ” ì»´í“¨í„°ë¡œ, ìš”ì²­ì„ ë³´ë‚´ë©´ ê·¸ì— ë§žëŠ” ì‘ë‹µì„ ë³´ë‚¸ë‹¤. ìš°ë¦¬ëŠ” ì„œë²„ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ expressë¥¼ ì‚¬ìš©í•œë‹¤. expressë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì€ `import express from "express"`ë¡œ ê°€ëŠ¥í•˜ë‹¤. ì´ë•Œ expressëŠ” node_modules í´ë”ì— ìžˆì§€ë§Œ, npmì´ ì•Œì•„ì„œ ì € í´ë”ì—ì„œ ì°¾ì•„ì£¼ê¸° ë•Œë¬¸ì— ê·¸ëƒ¥ expressë¼ê³ ë§Œ ì¨ë„ ëœë‹¤. expressì—ì„œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“œëŠ” ë°©ë²•ì€ êµ‰ìž¥ížˆ ê°„ë‹¨í•˜ë‹¤. ê·¸ì € `const app = express()`ë¼ê³ ë§Œ ì ì–´ì£¼ë©´ ëœë‹¤. ì´ë ‡ê²Œ ë§Œë“¤ì–´ì§„ ì„œë²„ëŠ” listening ì¤‘ì¼ ë•Œì—ë§Œ ìš”ì²­ì„ ë°›ê³  ì‘ë‹µì„ í•œë‹¤. ì´ë¥¼ í•˜ëŠ” ë°©ë²•ì€ `app.listen(PORT, handleListening);`ìœ¼ë¡œ ê°€ëŠ¥í•˜ë‹¤. ì´ë•Œ, listenì¼ ë•Œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜ê°€ handleListeningì´ë‹¤. PORTëŠ” ì§€ê¸ˆ ì‚¬ìš©í•˜ëŠ” í¬íŠ¸ì˜ ìˆ«ìžë¥¼ ë§í•˜ëŠ”ë°, ëŒ€ë¶€ë¶„ `const PORT = 4000;`ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤. ì´ëŠ” ê´€ìŠµì ì¸ ìˆ«ìžì¼ ë¿ ë‹¤ë¥¸ ìˆ«ìžë¥¼ ì‚¬ìš©í•´ë„ ëœë‹¤. ê·¸ëŸ°ë° ì–´ë–¤ í¬íŠ¸ëŠ” ì‚¬ìš©ì¤‘ì¼ ìˆ˜ë„ ìžˆì–´ì„œ ìž‘ë™í•˜ì§€ ì•Šì„ ìˆ˜ë„ ìžˆë‹¤. ìˆ«ìžê°€ ë†’ì€ í¬íŠ¸ëŠ” ë¹„ì–´ìžˆì„ ê°€ëŠ¥ì„±ì´ ë†’ìœ¼ë¯€ë¡œ ë‹¤ë¥¸ í¬íŠ¸ë¥¼ ì‚¬ìš©í•œë‹¤ë©´ ìˆ«ìžê°€ ë†’ì€ ê²ƒ ì¤‘ì— í•˜ë‚˜ë¥¼ ê³ ë¥´ë©´ ëœë‹¤.

### 3.9 Controllers Recap

ë„¤íŠ¸ì›Œí¬ì—ì„œ ë¼ìš°í„°ëŠ” ìµœì ì˜ ê²½ë¡œë¡œ ë°ì´í„°ë¥¼ ì „ì†¡ì‹œí‚¤ëŠ” ìž¥ì¹˜ë¡œ, ì„œë¡œ ë‹¤ë¥¸ ë„¤íŠ¸ì›Œí¬ ê°„ì˜ ì¤‘ê³„ ì—­í• ì„ í•œë‹¤. ê·¸ë¦¬ê³  ë¼ìš°íŒ…ì€ ì´ ìµœì ì˜ ê²½ë¡œë¥¼ ì„ íƒí•˜ëŠ” ê³¼ì •ì´ë‹¤. ì´ ê°œë…ì€ ìµìŠ¤í”„ë ˆìŠ¤ì—ë„ ë¹„ìŠ·í•˜ê²Œ êµ¬í˜„ëœë‹¤. ìµìŠ¤í”„ë ˆìŠ¤ì—ì„œ ë¼ìš°íŒ…ì€ URIì™€ HTTP ìš”ì²­ ë©”ì†Œë“œì— ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ì‘ë‹µí•˜ëŠ” ë°©ë²•ì„ ê²°ì •í•˜ëŠ” ê²ƒì„ ë§í•œë‹¤. ê·¸ë¦¬ê³  ì´ ì—­í• ì„ ìˆ˜í–‰í•˜ëŠ” ì˜¤ë¸Œì íŠ¸ë¥¼ ë¼ìš°í„°ë¼ê³  í•œë‹¤. ë¼ìš°í„°ë¥¼ êµ¬ì¡°ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. `app.METHOD(PATH, HANDLER)` ì—¬ê¸°ì„œ,

- appì€ expressì˜ ì¸ìŠ¤í„´ìŠ¤
- METHODëŠ” HTTP Request Method
- PATHëŠ” ì„œë²„ì˜ ê²½ë¡œ
- HANDLERëŠ” ë¼ìš°í„°ê°€ ë§žì„ ë•Œ, ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜

ì˜ˆë¥¼ ë“¤ì–´ `app.get('/', homehandler)`ëŠ” í™ˆ(/)ì— GET ìš”ì²­ì´ ì˜¤ë©´ homehandler í•¨ìˆ˜ê°€ ì‹¤í–‰ëœë‹¤. ì´ë•Œ, homehandler ê°™ì€ í•¨ìˆ˜ë¥¼ Controllersë¼ê³  í•˜ëŠ”ë°, ì‚¬ìš©ìžì˜ ìš”ì²­ì— ë”°ë¥¸ ì‘ë‹µì„ í•˜ëŠ” í•¨ìˆ˜ë‹¤. ì´ í•¨ìˆ˜ëŠ” ë‹¤ìŒì²˜ëŸ¼ ì‚¬ìš©í•œë‹¤.

```
const homehandler = (req, res) => {
    return res.end();
}
```

ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë³´ë©´ reqì™€ resê°€ ìžˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìžˆë‹¤. ì‚¬ì‹¤ nextë„ ìžˆì§€ë§Œ ì´ëŠ” middlewareì—ì„œ ë‹¤ë£¬ë‹¤. reqëŠ” ìš”ì²­í•œ ì‚¬ëžŒì˜ ip, ë°©ë²• ë“± ìš”ì²­ì— ê´€í•œ ê²ƒì„ ë‹¤ë£¨ê³ , resëŠ” ê·¸ì— ëŒ€í•œ ì‘ë‹µì„ ë‹¤ë£¬ë‹¤. res.end()ë¼ê³  ì ì–´ì£¼ë©´ ì‘ë‹µìœ¼ë¡œ ì¢…ë£Œì‹œí‚¤ê³ , res.sendë¥¼ ì‚¬ìš©í•˜ë©´ ë©”ì„¸ì§€ë¥¼ ì „ë‹¬í•  ìˆ˜ ìžˆë‹¤. 

### 3.10 MiddleWare Recap
ë¯¸ë“¤ì›¨ì–´ëŠ” ì¤‘ê°„(middle)ì— ìžˆëŠ” ì†Œí”„íŠ¸ì›¨ì–´(software)ë‹¤. ë¯¸ë“¤ì›¨ì–´ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ì¼ì¢…ìœ¼ë¡œ req, res, next ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤. ë¯¸ë“¤ì›¨ì–´ëŠ” next()ë¡œ ë‹¤ìŒ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìžˆë‹¤. ì•„ëž˜ ì½”ë“œ ì˜ˆì‹œë¥¼ ë³´ìž.
```
const firstMiddleWare = (req, res, next) => {
    next();
}

const secondMiddleWare = (req, res, next) => {
    next();
}

const thirdMiddleWare = (req, res, next) => {
    return res.end();
}

const lastController = (req, res) => {
    return res.send("last one");
}

app.get('/', firstMiddleWare, secondMiddleWare, thirdMiddleWare, lastController);
```

ìœ„ì˜ ì½”ë“œë¥¼ ë³´ë©´ ë¼ìš°í„°ì— ì§€ê¸ˆê³¼ëŠ” ë‹¬ë¦¬ í•¨ìˆ˜ê°€ ì—¬ëŸ¬ê°œ ì£¼ì–´ì ¸ ìžˆë‹¤. ì´ í•¨ìˆ˜ëŠ” ìˆœì„œëŒ€ë¡œ ì‹¤í–‰ì´ ë˜ê²Œ ëœë‹¤. ì¦‰ first -> second -> third -> last ìˆœì„œë¡œ ì‹¤í–‰ì´ ëœë‹¤. firstMiddleWareë¥¼ ë³´ë©´ next()ê°€ ìžˆë‹¤. next()ëŠ” ìŠ¤íƒì˜ ë‹¤ìŒ í•¨ìˆ˜ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ê²ƒìœ¼ë¡œ ì´ ê²½ìš° secondMiddleWareë¥¼ ë¶ˆëŸ¬ì˜¨ë‹¤. ì´ì²˜ëŸ¼ ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜ëŠ” ì¤‘ê°„ì— ì§€ë‚˜ê°€ëŠ” í•¨ìˆ˜ë¡œ ì‚¬ìš©ì´ ëœë‹¤. í•¨ìˆ˜ë‚´ì˜ ì½”ë“œê°€ ì‹¤í–‰ë˜ë‹¤ next()ë¥¼ ë§Œë‚˜ê²Œ ë˜ë©´ ë‹¤ìŒ ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ”ë°, ë§Œì•½ next()ë¥¼ ë§Œë‚˜ì§€ ëª»í•˜ë©´ ë‹¤ìŒ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì§€ ëª»í•œë‹¤. í•˜ì§€ë§Œ ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜ë¥¼ ì¤‘ë„ì— ëŠì„ ìˆ˜ ìžˆëŠ”ë°, resë¡œ ì‘ë‹µí•˜ëŠ” ê²½ìš°ë‹¤. ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ë‹¤ê°€ ì‘ë‹µí•˜ê²Œ ë˜ë©´ ë‹¤ìŒ ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šê³  ì¢…ë£Œë˜ê²Œ ëœë‹¤. thirdMiddleWareë¥¼ ë³´ë©´ next()ê°€ ì•„ë‹Œ return res.end()ì¸ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìžˆë‹¤. ì´ í•¨ìˆ˜ëŠ” ë‹¤ìŒ í•¨ìˆ˜ì¸ lastControllerë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šê³  ì‘ë‹µí•˜ê¸° ë•Œë¬¸ì— lastControllerëŠ” ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤. ì´ë•Œ, lastControllerëŠ” nextê°€ ì—†ëŠ”ë°, ê·¸ ì´ìœ ëŠ” ë§ˆì§€ë§‰ í•¨ìˆ˜ë¼ëŠ” ê²ƒì„ í‘œí˜„í•˜ëŠ” ê´€ìŠµì´ê¸° ë•Œë¬¸ì´ë‹¤.

ê·¸ëŸ°ë° ì—¬ëŸ¬ í•¨ìˆ˜ì—ì„œ ë™ì¼í•œ ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤. ì´ë ‡ê²Œ ê³µí†µëœ ë¶€ë¶„ì´ ìžˆì„ ë•Œ, app.useë¥¼ ì‚¬ìš©í•˜ë©´ ê·¸ ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜ëŠ” ê¸€ë¡œë²Œí•˜ê²Œ ì ìš©ëœë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë‹¤ìŒ ì½”ë“œë¥¼ ë³´ìž.

```
app.get('/', firstMiddleWare, secondMiddleWare, thirdMiddleWare, lastController);

app.get('/login', firstMiddleWare, secondMiddleWare, thirdMiddleWare, loginController);
```

ìœ„ë¥¼ ë³´ë©´ first, second, third ë¶€ë¶„ì´ ê³µí†µë˜ë¯€ë¡œ useë¥¼ ì‚¬ìš©í•´ì„œ ì•„ëž˜ì²˜ëŸ¼ ì••ì¶•ì´ ê°€ëŠ¥í•˜ë‹¤.

```
app.use(firstMiddleWare, secondMiddleWare, thirdMiddleWare);

app.get('/', lastController);

app.get('/login', loginController);
```

ì´ë•Œ, ë¨¼ì € ì˜¤ëŠ” ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜ê°€ ë¨¼ì € ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— app.useê°€ app.getë³´ë‹¤ ë¹¨ë¼ì•¼ í•˜ê³ , app.use ë‚´ì—ì„œë„ ìˆœì„œê°€ ë°”ë€Œë©´ ì•ˆ ëœë‹¤.

### 3.11 External Middlewares
ëª¨ê±´(Morgan)ì€ loggingì— ë„ì›€ì„ ì£¼ëŠ” ë¯¸ë“¤ì›¨ì–´ë¡œ, ì—¬ê¸°ì„œ ë¡œê¹…ì´ëž€ ì–´ë–¤ ì¼ì´ ìžˆì—ˆëŠ”ì§€ ê¸°ë¡í•˜ëŠ” ê²ƒì„ ë§í•œë‹¤. ìš°ì„  ëª¨ê±´ì„ ì„¤ì¹˜í•˜ë ¤ë©´ `npm i morgan`ì„ ìž…ë ¥í•œë‹¤. ëª¨ê±´ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ ìš°ì„  `import morgan from "morgan";`ë¡œ íŒ¨í‚¤ì§€ë¥¼ ë¶ˆëŸ¬ì˜¨ë‹¤. ê·¸ í›„ `const logger = morgan("dev");`ë¡œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“ ë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ `app.user(logger)`ë¡œ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì ìš©í•œë‹¤.

ì´ë ‡ê²Œ ìž‘ì„±í•˜ê³  íŽ˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ë©´ ì½˜ì†”ì— HTTP request, ì£¼ì†Œ, ì‘ë‹µ ì†ë„ ë“±ì´ ë‚˜ì˜¨ë‹¤. ëª¨ê±´ì€ í•¨ìˆ˜ì— ë”°ë¼ ë” ë§Žì€ ì •ë³´ë¥¼ ë³´ì—¬ì¤„ ìˆ˜ë„ ìžˆëŠ”ë° ì´ë¥¼ ì¡°ì ˆí•˜ëŠ” ê²ƒì€ morganí•¨ìˆ˜ë¡œ 5ê°œì˜ ê°’ì„ ì‚¬ìš©í•˜ë©° ë¦¬ìŠ¤íŠ¸ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

- combined
- common
- dev
- short
- tiny

ê°ê° ì–¼ë§ˆë‚˜ ë§Žì€ ì •ë³´ë¥¼ ë³´ì—¬ì£¼ëŠ”ì§€ê°€ ë‹¤ë¥´ì§€ë§Œ ìš°ë¦¬ëŠ” devë¥¼ ì‚¬ìš©í•œë‹¤. ì§€ê¸ˆê¹Œì§€ ìž‘ì„±í•œ ì½”ë“œëŠ” ì•„ëž˜ì— ì •ë¦¬í–ˆë‹¤.

```
import express from "express";
import morgan from "morgan";

const PORT = 4000;

const app = express();
const logger = morgan("dev");

const home = (req, res) => {
  return res.send("hello");
};
const login = (req, res) => {
  return res.send("login");
};

app.use(logger);
app.get("/", home);
app.get("/login", login);

const handleListening = () =>
  console.log(`âœ… Server listenting on port http://localhost:${PORT} ðŸš€`);

app.listen(PORT, handleListening);
```