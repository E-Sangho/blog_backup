---
title: Computer Networking Chapte 2
date: 2022-06-08 14:55:05
layout: series
series: NetWorking
thumbnail: ../assets/images/networking.jpg
summary: Computer Networking
categories: [CS]
---

# 2. Application Layer

이 장에서 네트워크 애플리케이션의 개념과 구현을 공부한다.
애플리케이션 계층 프로토골, 클라이언트와 서버, 프로세스, 그리고 트랜스포트 계층 인터페이스를 포함하는 주요 애플리케이션 계층 개념을 정의하면서 이 장을 시작한다.

## 2.1 Principles of Network Application

네트워크 애플리케이션 개발의 중점은 다른 엔드 시스템에서 동작하고, 네트워크를 통해 서로 통신하는 프로그램을 만드는 것이다.
그러므로 새로운 애플리케이션을 개발할 때 여러 종단 시스템에서 실행되는 소프트웨어를 작성해야 한다.
중요한 것은 라우터나 링크 계층 스위치처럼 네트워크 코어 장비에서 실행되는 소프트웨어를 작성할 필요가 없다는 것이다.

### 2.1.1 Network Application Architectures

애플리케이션 구조는 애플리케이션이 종단 시스템에서 어떻게 동작하는지 지시한다.
현대 네트워크 애플리케이션은 클라이언트-서버 구조나 P2P 구조를 주로 사용한다.

클라이언트-서버 구조에서 항상 켜져 있는 호스트를 서버라고 부른다.
서버는 클라이언트라고 부르는 수 많은 호스트의 요청을 받는다.
서버는 요청에 따라 객체를 클라이언트에게 보내준다.
클라이언트-서버 구조는 서버를 기반으로 작동하므로, 클라이언트는 서로 직접적으로 통신하지 않는다.
또 다른 특징은 서버가 고정 IP 주소를 사용한다는 것이다.
서버는 항상 동작하므로 클라이언트는 서버 주소로 패킷을 보내 항상 서버에 연결할 수 있다.

클라이언트-서버 애플리케이션이 하나의 서버만 사용한다면, 요청이 많아졌을 때 처리하지 못하게 된다.
그래서 수 많은 호스트를 갖춘 데이터 센터가 가상 서버를 생성하는데 사용된다.
검색엔진, 웹 결제, 이메일, 소셜 네트워킹 같은 인기있는 서비스는 여러 데이터 센터를 사용한다.

P2P 구조에서는 항상 켜져 있는 기반구조 서버에 최소로 의존한다.
대신에 애플리케이션된 간헐적으로 연걸된 호스트쌍이 직접 소통하게 만든다.
이때 연결된 호스트 쌍을 피어(peer)라고 한다.
특정 서버를 사용하지 않고 피어가 통신하므로 이 구조를 P2P(peer-to-peer)라고 한다.
대표적인 예시가 토렌트와 스카이프 등이 있다.

P2P 구조의 특징 중 하나가 자가 확장성(self-scalability)다.
예를 들어 각 피어가 파일을 요구함으로써 작업 부하를 만들어낸다.
이때 각 피어는 파일을 다른 피어에게 분배함으로써 서비스 능력을 추가한다.
또한 P2P는 가격이 저렴한데, 서버 기반구조와 대역폭이 필요 없기 때문이다.
그러나 P2P 애플리케이션은 분산 구조 특성으로 인해 보안, 성능, 신뢰성에 문제가 있다.

### 2.1.2 Processes Communicating

운영체제 용어에서 실제 통신하는 것은 프로그램이 아니라 프로세스(process)다.
프로세스는 엔드 시스템에서 실행되는 프로그램이다.
정확히 말하자면 프로그램은 하드 디스크에 저장된 파일이다.
그리고 이 파일을 실행하면 메모리에 올라가고 이를 프로세스라고 한다.
다시 말해 프로세스는 실행중인 프로그램이다.
통신 프로세스가 같은 엔드 시스템에서 실행될 때, OS를 통해 프로세스 간에 통신이 가능하다.
그러나 이 책은 같은 호스트에서 프로세스가 통신하는 방법은 관심이 없다.
대신에 다른 엔드 시스템에서 실행되는 프로세스 통신만 다룬다.

2개의 다른 엔드 시스템에서 프로세스는 컴퓨터 네트워크를 통한 메세지 교환으로 통신한다.

#### Client and Server Processes

네트워크 애플리케이션은 서로 메세지를 보내는 두 프로세스로 구성된다.
프로세스 쌍에서 통신 세션에서 통신을 초기화 하는 프로세스를 클라이언트라고 하고, 세션을 시작하기 위해 접속을 기다리는 프로세스를 서버라고 한다.

#### The Interface Between the Process and the Computer Network

프로세스는 소켓(socket)을 통해 네트워크로 메세지를 보내고 받는다.
소켓은 호스트의 어플리케이션 계층과 트랜스포트 계층 간의 인터페이스다.
동시에 소켓은 네트워크 애플리케이션이 인터넷에 만든 프로그래밍 인터페이스이므로 API(Application Programming Interface)라고도 한다.

#### Addressing Processes

목적지로 메세지를 보내기 위해선 목적지 주소가 필요하다.

### 2.1.3 Transport Services Available to Applications

소켓은 애플리케이션 프로세서에서 트랜스포트 프로토콜로 메세지를 넘겨준다.
트랜스포트 프로토콜은 여러 종류가 있으며, 그 중에서 가장 적합한 것을 골라서 쓰게 된다.
트랜스포트 계층을 신뢰적 데이터 전송, 처리율, 시간, 보안 4가지 측면에서 살펴보자.

#### Reliable Data Transfer

네트워크 전송 과정에서 패킷이 손실될 수 있다.
프로토콜은 데이터 전송이 손실 없이 되었음을 보장해줘야 한다.
이런 서비스를 신뢰적 데이터 전송이라 한다.
트랜스포트 계층 프로토콜이 신뢰적 데이터 전송을 제공하지 않을 수 있다.
이는 어느 정도의 손실이 허용되는 경우에만 사용된다.
예를 들어 오디오, 비디오 같은 경우 약간의 손실은 큰 영향을 끼치지 않는다.
반면 은행 데이터 같이 중요한 정보는 반드시 신뢰적 데이터 전송이 이뤄져야 한다.

#### Trhoughput

네트워크 상태에 따라 전송율의 차이가 생긴다.
트랜스포트 프로토콜은 최소한의 속도를 보장한다.

#### Timing

일정 시간 안에 도착할 것을 보장한다.

#### Security

보안이 적용되어야 함

### 2.1.4 Transport Services Provided by the Internet

인터넷은 애플리케이션에게 UDP(User Datagram Protocol)과 TCP(Transmission Control Protocol)이라는 2가지 프로토콜을 제공한다.

#### TCP Services

TCP는 아래 2가지 서비스를 제공한다.

-   연결 지향 서비스(Connection-oriented service): 애플리케이션 계층 메세지를 전송하기 전에 TCP는 클라이언트와 서버가 서로 전송 제어 정보를 교환하도록 한다. 이는 클라이언트와 서버에 패킷이 도착할 준비를 시작할 수 있게 한다. 이 단계가 지나면 TCP 연결이 이뤄진다. 이 연결은 두 프로세스가 서로 메세지를 보낼 수 있다. 애플리케이션이 메세지 전송을 마치면 연결은 끊어진다.
-   신뢰적 데이터 전송 서비스(Reliable data transfer service)

> TCP나 UDP는 데이터를 암호화하지 않는다. 이 때문에 중요한 내용이 중간에 누출될 수 있다. 이 때문에 TCP를 강화한 SSL(Secure Sockets Layer)를 개발했다. SSL은 기존의 TCP가 하는 일은 그대로 하고, 추가로 암호화, 데이터 무결성, 종단 인증 등의 보안 기능이 추가되었다. SSL은 트랜스포트 프로토콜이 아니라 애플리케이션 계층에서 구현된 것이다. 애플리케이션은 SSL로 데이터를 보내고, SSL은 이름 암호화한다. 그리고 암호화된 정보를 TCP로 전송한다. 수신 소켓은 이를 SSL로 전달해서 해독한다. 그리고 이를 수신 프로세스로 전달한다. 이 과정은 8장에서 자세히 다룰 예정이다.

TCP는 네트워크가 혼잡하면 속도를 낮춘다.
이는 프로세스에게 이득은 아니지만, 전체적 인터넷 성능 향상을 위해 필요한 작업이다.
TCP는 각 네트워크가 공평하게 대역폭을 공유하도록 제한한다.

#### UDP Services

UDP는 TCP와 달리 연결 지향 서비스를 제공하지 않는다.
즉, 두 프로세스가 통신하기 전에 전송 정보를 교환하지 않는다.
UDP는 비신뢰적 데이터 전송 서비스를 사용한다.
쉽게 말해서 메세지를 보내면, 그 메세지가 수신되는 것을 보장하지 않는다.
게다가 메세지 순서를 보장하지 않아서 뒤섞일 수도 있다.
또한 TCP와 달리 네트워크가 혼잡해도 제어하지 않는다.
그래서 원하는 속도로 데이터 전송이 가능하다.
물론 네트워크가 혼잡으로 이보다 속도가 느려질 수도 있다.

#### Services Not Provided by Internet Transport Protocols

### 2.1.5 Application-Layer Progocols

애플리케이션 계층 프로토콜은 프로세스가 서로 메세지를 보내는 방법을 정의하는데, 그 내용은 다음과 같다.

-   교환 메세지 타입(요청이나 응답)
-   메세지 타입의 문법
-   필드에 있는 정보의 의미
-   프로세스가 언제, 어떻게 메세지를 보내고 응답하는지 정하는 규칙

애플리케이션 계층 프로토콜이 같은 경우에만 서로 통신할 수 있다.
예를 웹은 HTTP를 주로 사용하므로 어떤 웹 서버로부터도 정보를 가져올 수 있다.
반면 스카이프 같은 기업은 비개방 애플리케이션 계층 프로토콜을 사용해서 통신할 수 없다.

애플리케이션 계층 프로토콜은 네트워크 애플리케이션의 일부분일 뿐이다.

### 2.1.6 Network Applications Covered in This Book

이 책은 5개의 중요한 네트워크 애플리케이션만을 다룬다.
각각 웹, 파일 전송, 이메일, 디렉터리 서비스, 비디오 스트리밍, P2P 애플리케이션이다.
먼저 웹의 HTTP를 다루고, FTP를 다룬다.
그 후 이메일, DNS, CDN을 다뤄보겠다.

## 2.2 The Web and HTTP

### 2.2.1 Overview of HTTP

웹에서 클라이언트와 서버는 서로 HTTP(HyperText Transfer Protocol) 메세지를 교환하여 통신한다.
HTTP는 메세지의 구조와 클라이언트와 서버가 어떻게 메세지를 교환하는지 정의한다.

웹 페이지는 객체로 구성된다. 웹 브라우저는 HTTP의 클라이언트를 구현한 것으로, 이 때문에 웹에서 브라우저와 클라이언트 용어를 혼용해서 사용한다.
